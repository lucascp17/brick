<!Doctype HTML>
<html>
    <head>
        <meta charset="ascii"/>
        <title>
            Brick Games 1000 in 1
        </title>
    </head>
    <body>
        <section id="left-section">
            <table id="display">
                <tr>
                    <td id="cell_0_0" class="cell off"/>
                    <td id="cell_0_1" class="cell off"/>
                    <td id="cell_0_2" class="cell off"/>
                    <td id="cell_0_3" class="cell off"/>
                    <td id="cell_0_4" class="cell off"/>
                    <td id="cell_0_5" class="cell off"/>
                    <td id="cell_0_6" class="cell off"/>
                    <td id="cell_0_7" class="cell off"/>
                    <td id="cell_0_8" class="cell off"/>
                    <td id="cell_0_9" class="cell off"/>
                </tr>
                <tr>
                    <td id="cell_1_0" class="cell off"/>
                    <td id="cell_1_1" class="cell off"/>
                    <td id="cell_1_2" class="cell off"/>
                    <td id="cell_1_3" class="cell off"/>
                    <td id="cell_1_4" class="cell off"/>
                    <td id="cell_1_5" class="cell off"/>
                    <td id="cell_1_6" class="cell off"/>
                    <td id="cell_1_7" class="cell off"/>
                    <td id="cell_1_8" class="cell off"/>
                    <td id="cell_1_9" class="cell off"/>
                </tr>
                <tr>
                    <td id="cell_2_0" class="cell off"/>
                    <td id="cell_2_1" class="cell off"/>
                    <td id="cell_2_2" class="cell off"/>
                    <td id="cell_2_3" class="cell off"/>
                    <td id="cell_2_4" class="cell off"/>
                    <td id="cell_2_5" class="cell off"/>
                    <td id="cell_2_6" class="cell off"/>
                    <td id="cell_2_7" class="cell off"/>
                    <td id="cell_2_8" class="cell off"/>
                    <td id="cell_2_9" class="cell off"/>
                </tr>
                <tr>
                    <td id="cell_3_0" class="cell off"/>
                    <td id="cell_3_1" class="cell off"/>
                    <td id="cell_3_2" class="cell off"/>
                    <td id="cell_3_3" class="cell off"/>
                    <td id="cell_3_4" class="cell off"/>
                    <td id="cell_3_5" class="cell off"/>
                    <td id="cell_3_6" class="cell off"/>
                    <td id="cell_3_7" class="cell off"/>
                    <td id="cell_3_8" class="cell off"/>
                    <td id="cell_3_9" class="cell off"/>
                </tr>
                <tr>
                    <td id="cell_4_0" class="cell off"/>
                    <td id="cell_4_1" class="cell off"/>
                    <td id="cell_4_2" class="cell off"/>
                    <td id="cell_4_3" class="cell off"/>
                    <td id="cell_4_4" class="cell off"/>
                    <td id="cell_4_5" class="cell off"/>
                    <td id="cell_4_6" class="cell off"/>
                    <td id="cell_4_7" class="cell off"/>
                    <td id="cell_4_8" class="cell off"/>
                    <td id="cell_4_9" class="cell off"/>
                </tr>
                <tr>
                    <td id="cell_5_0" class="cell off"/>
                    <td id="cell_5_1" class="cell off"/>
                    <td id="cell_5_2" class="cell off"/>
                    <td id="cell_5_3" class="cell off"/>
                    <td id="cell_5_4" class="cell off"/>
                    <td id="cell_5_5" class="cell off"/>
                    <td id="cell_5_6" class="cell off"/>
                    <td id="cell_5_7" class="cell off"/>
                    <td id="cell_5_8" class="cell off"/>
                    <td id="cell_5_9" class="cell off"/>
                </tr>
                <tr>
                    <td id="cell_6_0" class="cell off"/>
                    <td id="cell_6_1" class="cell off"/>
                    <td id="cell_6_2" class="cell off"/>
                    <td id="cell_6_3" class="cell off"/>
                    <td id="cell_6_4" class="cell off"/>
                    <td id="cell_6_5" class="cell off"/>
                    <td id="cell_6_6" class="cell off"/>
                    <td id="cell_6_7" class="cell off"/>
                    <td id="cell_6_8" class="cell off"/>
                    <td id="cell_6_9" class="cell off"/>
                </tr>
                <tr>
                    <td id="cell_7_0" class="cell off"/>
                    <td id="cell_7_1" class="cell off"/>
                    <td id="cell_7_2" class="cell off"/>
                    <td id="cell_7_3" class="cell off"/>
                    <td id="cell_7_4" class="cell off"/>
                    <td id="cell_7_5" class="cell off"/>
                    <td id="cell_7_6" class="cell off"/>
                    <td id="cell_7_7" class="cell off"/>
                    <td id="cell_7_8" class="cell off"/>
                    <td id="cell_7_9" class="cell off"/>
                </tr>
                <tr>
                    <td id="cell_8_0" class="cell off"/>
                    <td id="cell_8_1" class="cell off"/>
                    <td id="cell_8_2" class="cell off"/>
                    <td id="cell_8_3" class="cell off"/>
                    <td id="cell_8_4" class="cell off"/>
                    <td id="cell_8_5" class="cell off"/>
                    <td id="cell_8_6" class="cell off"/>
                    <td id="cell_8_7" class="cell off"/>
                    <td id="cell_8_8" class="cell off"/>
                    <td id="cell_8_9" class="cell off"/>
                </tr>
                <tr>
                    <td id="cell_9_0" class="cell off"/>
                    <td id="cell_9_1" class="cell off"/>
                    <td id="cell_9_2" class="cell off"/>
                    <td id="cell_9_3" class="cell off"/>
                    <td id="cell_9_4" class="cell off"/>
                    <td id="cell_9_5" class="cell off"/>
                    <td id="cell_9_6" class="cell off"/>
                    <td id="cell_9_7" class="cell off"/>
                    <td id="cell_9_8" class="cell off"/>
                    <td id="cell_9_9" class="cell off"/>
                </tr>
                <tr>
                    <td id="cell_10_0" class="cell off"/>
                    <td id="cell_10_1" class="cell off"/>
                    <td id="cell_10_2" class="cell off"/>
                    <td id="cell_10_3" class="cell off"/>
                    <td id="cell_10_4" class="cell off"/>
                    <td id="cell_10_5" class="cell off"/>
                    <td id="cell_10_6" class="cell off"/>
                    <td id="cell_10_7" class="cell off"/>
                    <td id="cell_10_8" class="cell off"/>
                    <td id="cell_10_9" class="cell off"/>
                </tr>
                <tr>
                    <td id="cell_11_0" class="cell off"/>
                    <td id="cell_11_1" class="cell off"/>
                    <td id="cell_11_2" class="cell off"/>
                    <td id="cell_11_3" class="cell off"/>
                    <td id="cell_11_4" class="cell off"/>
                    <td id="cell_11_5" class="cell off"/>
                    <td id="cell_11_6" class="cell off"/>
                    <td id="cell_11_7" class="cell off"/>
                    <td id="cell_11_8" class="cell off"/>
                    <td id="cell_11_9" class="cell off"/>
                </tr>
                <tr>
                    <td id="cell_12_0" class="cell off"/>
                    <td id="cell_12_1" class="cell off"/>
                    <td id="cell_12_2" class="cell off"/>
                    <td id="cell_12_3" class="cell off"/>
                    <td id="cell_12_4" class="cell off"/>
                    <td id="cell_12_5" class="cell off"/>
                    <td id="cell_12_6" class="cell off"/>
                    <td id="cell_12_7" class="cell off"/>
                    <td id="cell_12_8" class="cell off"/>
                    <td id="cell_12_9" class="cell off"/>
                </tr>
                <tr>
                    <td id="cell_13_0" class="cell off"/>
                    <td id="cell_13_1" class="cell off"/>
                    <td id="cell_13_2" class="cell off"/>
                    <td id="cell_13_3" class="cell off"/>
                    <td id="cell_13_4" class="cell off"/>
                    <td id="cell_13_5" class="cell off"/>
                    <td id="cell_13_6" class="cell off"/>
                    <td id="cell_13_7" class="cell off"/>
                    <td id="cell_13_8" class="cell off"/>
                    <td id="cell_13_9" class="cell off"/>
                </tr>
                <tr>
                    <td id="cell_14_0" class="cell off"/>
                    <td id="cell_14_1" class="cell off"/>
                    <td id="cell_14_2" class="cell off"/>
                    <td id="cell_14_3" class="cell off"/>
                    <td id="cell_14_4" class="cell off"/>
                    <td id="cell_14_5" class="cell off"/>
                    <td id="cell_14_6" class="cell off"/>
                    <td id="cell_14_7" class="cell off"/>
                    <td id="cell_14_8" class="cell off"/>
                    <td id="cell_14_9" class="cell off"/>
                </tr>
                <tr>
                    <td id="cell_15_0" class="cell off"/>
                    <td id="cell_15_1" class="cell off"/>
                    <td id="cell_15_2" class="cell off"/>
                    <td id="cell_15_3" class="cell off"/>
                    <td id="cell_15_4" class="cell off"/>
                    <td id="cell_15_5" class="cell off"/>
                    <td id="cell_15_6" class="cell off"/>
                    <td id="cell_15_7" class="cell off"/>
                    <td id="cell_15_8" class="cell off"/>
                    <td id="cell_15_9" class="cell off"/>
                </tr>
                <tr>
                    <td id="cell_16_0" class="cell off"/>
                    <td id="cell_16_1" class="cell off"/>
                    <td id="cell_16_2" class="cell off"/>
                    <td id="cell_16_3" class="cell off"/>
                    <td id="cell_16_4" class="cell off"/>
                    <td id="cell_16_5" class="cell off"/>
                    <td id="cell_16_6" class="cell off"/>
                    <td id="cell_16_7" class="cell off"/>
                    <td id="cell_16_8" class="cell off"/>
                    <td id="cell_16_9" class="cell off"/>
                </tr>
                <tr>
                    <td id="cell_17_0" class="cell off"/>
                    <td id="cell_17_1" class="cell off"/>
                    <td id="cell_17_2" class="cell off"/>
                    <td id="cell_17_3" class="cell off"/>
                    <td id="cell_17_4" class="cell off"/>
                    <td id="cell_17_5" class="cell off"/>
                    <td id="cell_17_6" class="cell off"/>
                    <td id="cell_17_7" class="cell off"/>
                    <td id="cell_17_8" class="cell off"/>
                    <td id="cell_17_9" class="cell off"/>
                </tr>
                <tr>
                    <td id="cell_18_0" class="cell off"/>
                    <td id="cell_18_1" class="cell off"/>
                    <td id="cell_18_2" class="cell off"/>
                    <td id="cell_18_3" class="cell off"/>
                    <td id="cell_18_4" class="cell off"/>
                    <td id="cell_18_5" class="cell off"/>
                    <td id="cell_18_6" class="cell off"/>
                    <td id="cell_18_7" class="cell off"/>
                    <td id="cell_18_8" class="cell off"/>
                    <td id="cell_18_9" class="cell off"/>
                </tr>
                <tr>
                    <td id="cell_19_0" class="cell off"/>
                    <td id="cell_19_1" class="cell off"/>
                    <td id="cell_19_2" class="cell off"/>
                    <td id="cell_19_3" class="cell off"/>
                    <td id="cell_19_4" class="cell off"/>
                    <td id="cell_19_5" class="cell off"/>
                    <td id="cell_19_6" class="cell off"/>
                    <td id="cell_19_7" class="cell off"/>
                    <td id="cell_19_8" class="cell off"/>
                    <td id="cell_19_9" class="cell off"/>
                </tr>
            </table>
        </section>
        <aside id="stats">
            <div class="stats-item">
                <h3>
                    Score
                </h3>
                <div id="score-sign">
                    <div id="s-5" class="sign zero">
					</div>
                    <div id="s-4" class="sign zero">
					</div>
                    <div id="s-3" class="sign zero">
					</div>
                    <div id="s-2" class="sign zero">
					</div>
                    <div id="s-1" class="sign zero">
					</div>
                    <div id="s-0" class="sign zero">
					</div>
                </div>
            </div>
            <div class="stats-item">
                <h3>
                    Hi-Score
                </h3>
                <div id="hiscore-sign">
                    <div id="h-5" class="sign zero">
					</div>
                    <div id="h-4" class="sign zero">
					</div>
                    <div id="h-3" class="sign zero">
					</div>
                    <div id="h-2" class="sign zero">
					</div>
                    <div id="h-1" class="sign zero">
					</div>
                    <div id="h-0" class="sign zero">
					</div>
                </div>
            </div>
            <div class="stats-item">
                <h3>
                    Level
                </h3>
                <div id="level-sign" class="on">
                    <div id="l-5" class="sign zero hidden">
                    </div>
                    <div id="l-4" class="sign zero hidden">
                    </div>
                    <div id="l-3" class="sign zero hidden">
                    </div>
                    <div id="l-2" class="sign zero hidden">
                    </div>
                    <div id="l-1" class="sign zero">
                    </div>
                    <div id="l-0" class="sign zero">
                    </div>
                </div>
            </div>
            <div class="stats-item">
                <table id="preview">
                    <tr>
                        <td id="prev_0_0" class="cell off"/>
                        <td id="prev_0_1" class="cell off"/>
                        <td id="prev_0_2" class="cell off"/>
                        <td id="prev_0_3" class="cell off"/>
                    </tr>
                    <tr>
                        <td id="prev_1_0" class="cell off"/>
                        <td id="prev_1_1" class="cell off"/>
                        <td id="prev_1_2" class="cell off"/>
                        <td id="prev_1_3" class="cell off"/>
                    </tr>
                    <tr>
                        <td id="prev_2_0" class="cell off"/>
                        <td id="prev_2_1" class="cell off"/>
                        <td id="prev_2_2" class="cell off"/>
                        <td id="prev_2_3" class="cell off"/>
                    </tr>
                    <tr>
                        <td id="prev_3_0" class="cell off"/>
                        <td id="prev_3_1" class="cell off"/>
                        <td id="prev_3_2" class="cell off"/>
                        <td id="prev_3_3" class="cell off"/>
                    </tr>
                </table>
            </div>
            <div class="stats-item">
                <h5 id="instruction" class="off">
                    Press<br/>
                    Space
                </h5>
                <h5 id="pause" class="off">
                    Pause
                </h5>
            </div>
        </aside>
        <style>
            body {
                background: #f5f5dc;
            }
            #left-section {
                border: 2px solid #000000;
                float: left;
                opacity: 0.75;
                padding: 0.75vh;
            }
            #preview {
                margin-left: auto;
            }
            #stats {
                float: left;
                margin-left: 1.5vh;
                opacity: 0.75;
            }
            .cell {
                background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAiIGhlaWdodD0iMTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjIiPgogICAgICAgIDxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMCIgaGVpZ2h0PSIxMCIvPgogICAgPC9nPgogICAgPGcgZmlsbD0iIzAwMDAwMCI+CiAgICAgICAgPHJlY3QgeD0iMiIgeT0iMiIgd2lkdGg9IjYiIGhlaWdodD0iNiIvPgogICAgPC9nPgo8L3N2Zz4=');
                background-size: 4.4vh;
                margin: 0;
                padding: 0;
                width: 4.4vh;
                height: 4.4vh;
                transition: opacity 0.15s;
            }
            .off {
                opacity: 0.2;
            }
            .on {
                opacity: 1.0;
            }
            .hidden {
                visibility: hidden;
            }
            .sign {
                background-size: 3vh;
                float: left;
                margin-left: 1vh;
                height: 5.25vh;
                width: 3vh;
            }
            .stats-item {
                margin-bottom: 10vh;
            }
            .stats-item h3 {
                font-family: Arial, Helvetica, sans-serif;
                font-size: 3.5vh;
                font-style: italic;
                margin: 1vh 0 0 0;
                text-transform: uppercase;
                text-align: right;
            }
            .stats-item h5 {
                font-family: Arial, Helvetica, sans-serif;
                font-size: 3.2vh;
                font-style: italic;
                margin-top: -3vh;
                margin-bottom: 9vh;
                margin-left: auto;
                margin-right: auto;
                text-align: center;
            }
            .none {
                background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNzAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxtYXNrIGlkPSJib3JkZXJzIj48ZyBmaWxsPSIjZmZmZmZmIj48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iNDAiIGhlaWdodD0iNzAiLz48L2c+PGcgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjEiPjxsaW5lIHgxPSIwIiB5MT0iMCIgeDI9IjUwIiB5Mj0iNTAiLz48bGluZSB4MT0iNDAiIHkxPSIwIiB4Mj0iLTEwIiB5Mj0iNTAiLz48bGluZSB4MT0iMCIgeTE9IjcwIiB4Mj0iNDUiIHkyPSIyNSIvPjxsaW5lIHgxPSI0MCIgeTE9IjcwIiB4Mj0iLTUiIHkyPSIyNSIvPjwvZz48L21hc2s+PC9kZWZzPjxnIGZpbGw9IiMwMDAwMDAiIG1hc2s9InVybCgjYm9yZGVycykiPjxwb2x5Z29uIHBvaW50cz0iMiwyIDAsNCAwLDMwIDUsMzUgMTAsMzAgMTAsMTAiIHN0eWxlPSJvcGFjaXR5OiAwLjIiLz48cG9seWdvbiBwb2ludHM9IjIsMiA0LDAgMzYsMCAzOCwyIDMwLDEwIDEwLDEwIiBzdHlsZT0ib3BhY2l0eTogMC4yIi8+PHBvbHlnb24gcG9pbnRzPSIzOCwyIDMwLDEwIDMwLDMwIDM1LDM1IDQwLDMwIDQwLDQiIHN0eWxlPSJvcGFjaXR5OiAwLjIiLz48cG9seWdvbiBwb2ludHM9IjUsMzUgMTAsMzAgMzAsMzAgMzUsMzUgMzAsNDAgMTAsNDAiIHN0eWxlPSJvcGFjaXR5OiAwLjIiLz48cG9seWdvbiBwb2ludHM9IjUsMzUgMCw0MCAwLDY2IDIsNjggMTAsNjAgMTAsNDAiIHN0eWxlPSJvcGFjaXR5OiAwLjIiLz48cG9seWdvbiBwb2ludHM9IjIsNjggMTAsNjAgMzAsNjAgMzgsNjggMzYsNzAgNCw3MCIgc3R5bGU9Im9wYWNpdHk6IDAuMiIvPjxwb2x5Z29uIHBvaW50cz0iMzUsMzUgMzAsNDAgMzAsNjAgMzgsNjggNDAsNjYgNDAsNDAiIHN0eWxlPSJvcGFjaXR5OiAwLjIiLz48L2c+PC9zdmc+');
            }
            .zero {
                background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNzAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxtYXNrIGlkPSJib3JkZXJzIj48ZyBmaWxsPSIjZmZmZmZmIj48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iNDAiIGhlaWdodD0iNzAiLz48L2c+PGcgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjEiPjxsaW5lIHgxPSIwIiB5MT0iMCIgeDI9IjUwIiB5Mj0iNTAiLz48bGluZSB4MT0iNDAiIHkxPSIwIiB4Mj0iLTEwIiB5Mj0iNTAiLz48bGluZSB4MT0iMCIgeTE9IjcwIiB4Mj0iNDUiIHkyPSIyNSIvPjxsaW5lIHgxPSI0MCIgeTE9IjcwIiB4Mj0iLTUiIHkyPSIyNSIvPjwvZz48L21hc2s+PC9kZWZzPjxnIGZpbGw9IiMwMDAwMDAiIG1hc2s9InVybCgjYm9yZGVycykiPjxwb2x5Z29uIHBvaW50cz0iMiwyIDAsNCAwLDMwIDUsMzUgMTAsMzAgMTAsMTAiIHN0eWxlPSJvcGFjaXR5OiAxLjAiLz48cG9seWdvbiBwb2ludHM9IjIsMiA0LDAgMzYsMCAzOCwyIDMwLDEwIDEwLDEwIiBzdHlsZT0ib3BhY2l0eTogMS4wIi8+PHBvbHlnb24gcG9pbnRzPSIzOCwyIDMwLDEwIDMwLDMwIDM1LDM1IDQwLDMwIDQwLDQiIHN0eWxlPSJvcGFjaXR5OiAxLjAiLz48cG9seWdvbiBwb2ludHM9IjUsMzUgMTAsMzAgMzAsMzAgMzUsMzUgMzAsNDAgMTAsNDAiIHN0eWxlPSJvcGFjaXR5OiAwLjIiLz48cG9seWdvbiBwb2ludHM9IjUsMzUgMCw0MCAwLDY2IDIsNjggMTAsNjAgMTAsNDAiIHN0eWxlPSJvcGFjaXR5OiAxLjAiLz48cG9seWdvbiBwb2ludHM9IjIsNjggMTAsNjAgMzAsNjAgMzgsNjggMzYsNzAgNCw3MCIgc3R5bGU9Im9wYWNpdHk6IDEuMCIvPjxwb2x5Z29uIHBvaW50cz0iMzUsMzUgMzAsNDAgMzAsNjAgMzgsNjggNDAsNjYgNDAsNDAiIHN0eWxlPSJvcGFjaXR5OiAxLjAiLz48L2c+PC9zdmc+');
            }
            .one {
                background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNzAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxtYXNrIGlkPSJib3JkZXJzIj48ZyBmaWxsPSIjZmZmZmZmIj48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iNDAiIGhlaWdodD0iNzAiLz48L2c+PGcgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjEiPjxsaW5lIHgxPSIwIiB5MT0iMCIgeDI9IjUwIiB5Mj0iNTAiLz48bGluZSB4MT0iNDAiIHkxPSIwIiB4Mj0iLTEwIiB5Mj0iNTAiLz48bGluZSB4MT0iMCIgeTE9IjcwIiB4Mj0iNDUiIHkyPSIyNSIvPjxsaW5lIHgxPSI0MCIgeTE9IjcwIiB4Mj0iLTUiIHkyPSIyNSIvPjwvZz48L21hc2s+PC9kZWZzPjxnIGZpbGw9IiMwMDAwMDAiIG1hc2s9InVybCgjYm9yZGVycykiPjxwb2x5Z29uIHBvaW50cz0iMiwyIDAsNCAwLDMwIDUsMzUgMTAsMzAgMTAsMTAiIHN0eWxlPSJvcGFjaXR5OiAwLjIiLz48cG9seWdvbiBwb2ludHM9IjIsMiA0LDAgMzYsMCAzOCwyIDMwLDEwIDEwLDEwIiBzdHlsZT0ib3BhY2l0eTogMC4yIi8+PHBvbHlnb24gcG9pbnRzPSIzOCwyIDMwLDEwIDMwLDMwIDM1LDM1IDQwLDMwIDQwLDQiIHN0eWxlPSJvcGFjaXR5OiAxLjAiLz48cG9seWdvbiBwb2ludHM9IjUsMzUgMTAsMzAgMzAsMzAgMzUsMzUgMzAsNDAgMTAsNDAiIHN0eWxlPSJvcGFjaXR5OiAwLjIiLz48cG9seWdvbiBwb2ludHM9IjUsMzUgMCw0MCAwLDY2IDIsNjggMTAsNjAgMTAsNDAiIHN0eWxlPSJvcGFjaXR5OiAwLjIiLz48cG9seWdvbiBwb2ludHM9IjIsNjggMTAsNjAgMzAsNjAgMzgsNjggMzYsNzAgNCw3MCIgc3R5bGU9Im9wYWNpdHk6IDAuMiIvPjxwb2x5Z29uIHBvaW50cz0iMzUsMzUgMzAsNDAgMzAsNjAgMzgsNjggNDAsNjYgNDAsNDAiIHN0eWxlPSJvcGFjaXR5OiAxLjAiLz48L2c+PC9zdmc+');
            }
            .two {
                background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNzAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxtYXNrIGlkPSJib3JkZXJzIj48ZyBmaWxsPSIjZmZmZmZmIj48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iNDAiIGhlaWdodD0iNzAiLz48L2c+PGcgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjEiPjxsaW5lIHgxPSIwIiB5MT0iMCIgeDI9IjUwIiB5Mj0iNTAiLz48bGluZSB4MT0iNDAiIHkxPSIwIiB4Mj0iLTEwIiB5Mj0iNTAiLz48bGluZSB4MT0iMCIgeTE9IjcwIiB4Mj0iNDUiIHkyPSIyNSIvPjxsaW5lIHgxPSI0MCIgeTE9IjcwIiB4Mj0iLTUiIHkyPSIyNSIvPjwvZz48L21hc2s+PC9kZWZzPjxnIGZpbGw9IiMwMDAwMDAiIG1hc2s9InVybCgjYm9yZGVycykiPjxwb2x5Z29uIHBvaW50cz0iMiwyIDAsNCAwLDMwIDUsMzUgMTAsMzAgMTAsMTAiIHN0eWxlPSJvcGFjaXR5OiAwLjIiLz48cG9seWdvbiBwb2ludHM9IjIsMiA0LDAgMzYsMCAzOCwyIDMwLDEwIDEwLDEwIiBzdHlsZT0ib3BhY2l0eTogMS4wIi8+PHBvbHlnb24gcG9pbnRzPSIzOCwyIDMwLDEwIDMwLDMwIDM1LDM1IDQwLDMwIDQwLDQiIHN0eWxlPSJvcGFjaXR5OiAxLjAiLz48cG9seWdvbiBwb2ludHM9IjUsMzUgMTAsMzAgMzAsMzAgMzUsMzUgMzAsNDAgMTAsNDAiIHN0eWxlPSJvcGFjaXR5OiAxLjAiLz48cG9seWdvbiBwb2ludHM9IjUsMzUgMCw0MCAwLDY2IDIsNjggMTAsNjAgMTAsNDAiIHN0eWxlPSJvcGFjaXR5OiAxLjAiLz48cG9seWdvbiBwb2ludHM9IjIsNjggMTAsNjAgMzAsNjAgMzgsNjggMzYsNzAgNCw3MCIgc3R5bGU9Im9wYWNpdHk6IDEuMCIvPjxwb2x5Z29uIHBvaW50cz0iMzUsMzUgMzAsNDAgMzAsNjAgMzgsNjggNDAsNjYgNDAsNDAiIHN0eWxlPSJvcGFjaXR5OiAwLjIiLz48L2c+PC9zdmc+');
            }
            .three {
                background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNzAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxtYXNrIGlkPSJib3JkZXJzIj48ZyBmaWxsPSIjZmZmZmZmIj48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iNDAiIGhlaWdodD0iNzAiLz48L2c+PGcgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjEiPjxsaW5lIHgxPSIwIiB5MT0iMCIgeDI9IjUwIiB5Mj0iNTAiLz48bGluZSB4MT0iNDAiIHkxPSIwIiB4Mj0iLTEwIiB5Mj0iNTAiLz48bGluZSB4MT0iMCIgeTE9IjcwIiB4Mj0iNDUiIHkyPSIyNSIvPjxsaW5lIHgxPSI0MCIgeTE9IjcwIiB4Mj0iLTUiIHkyPSIyNSIvPjwvZz48L21hc2s+PC9kZWZzPjxnIGZpbGw9IiMwMDAwMDAiIG1hc2s9InVybCgjYm9yZGVycykiPjxwb2x5Z29uIHBvaW50cz0iMiwyIDAsNCAwLDMwIDUsMzUgMTAsMzAgMTAsMTAiIHN0eWxlPSJvcGFjaXR5OiAwLjIiLz48cG9seWdvbiBwb2ludHM9IjIsMiA0LDAgMzYsMCAzOCwyIDMwLDEwIDEwLDEwIiBzdHlsZT0ib3BhY2l0eTogMS4wIi8+PHBvbHlnb24gcG9pbnRzPSIzOCwyIDMwLDEwIDMwLDMwIDM1LDM1IDQwLDMwIDQwLDQiIHN0eWxlPSJvcGFjaXR5OiAxLjAiLz48cG9seWdvbiBwb2ludHM9IjUsMzUgMTAsMzAgMzAsMzAgMzUsMzUgMzAsNDAgMTAsNDAiIHN0eWxlPSJvcGFjaXR5OiAxLjAiLz48cG9seWdvbiBwb2ludHM9IjUsMzUgMCw0MCAwLDY2IDIsNjggMTAsNjAgMTAsNDAiIHN0eWxlPSJvcGFjaXR5OiAwLjIiLz48cG9seWdvbiBwb2ludHM9IjIsNjggMTAsNjAgMzAsNjAgMzgsNjggMzYsNzAgNCw3MCIgc3R5bGU9Im9wYWNpdHk6IDEuMCIvPjxwb2x5Z29uIHBvaW50cz0iMzUsMzUgMzAsNDAgMzAsNjAgMzgsNjggNDAsNjYgNDAsNDAiIHN0eWxlPSJvcGFjaXR5OiAxLjAiLz48L2c+PC9zdmc+');
            }
            .four {
                background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNzAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxtYXNrIGlkPSJib3JkZXJzIj48ZyBmaWxsPSIjZmZmZmZmIj48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iNDAiIGhlaWdodD0iNzAiLz48L2c+PGcgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjEiPjxsaW5lIHgxPSIwIiB5MT0iMCIgeDI9IjUwIiB5Mj0iNTAiLz48bGluZSB4MT0iNDAiIHkxPSIwIiB4Mj0iLTEwIiB5Mj0iNTAiLz48bGluZSB4MT0iMCIgeTE9IjcwIiB4Mj0iNDUiIHkyPSIyNSIvPjxsaW5lIHgxPSI0MCIgeTE9IjcwIiB4Mj0iLTUiIHkyPSIyNSIvPjwvZz48L21hc2s+PC9kZWZzPjxnIGZpbGw9IiMwMDAwMDAiIG1hc2s9InVybCgjYm9yZGVycykiPjxwb2x5Z29uIHBvaW50cz0iMiwyIDAsNCAwLDMwIDUsMzUgMTAsMzAgMTAsMTAiIHN0eWxlPSJvcGFjaXR5OiAxLjAiLz48cG9seWdvbiBwb2ludHM9IjIsMiA0LDAgMzYsMCAzOCwyIDMwLDEwIDEwLDEwIiBzdHlsZT0ib3BhY2l0eTogMC4yIi8+PHBvbHlnb24gcG9pbnRzPSIzOCwyIDMwLDEwIDMwLDMwIDM1LDM1IDQwLDMwIDQwLDQiIHN0eWxlPSJvcGFjaXR5OiAxLjAiLz48cG9seWdvbiBwb2ludHM9IjUsMzUgMTAsMzAgMzAsMzAgMzUsMzUgMzAsNDAgMTAsNDAiIHN0eWxlPSJvcGFjaXR5OiAxLjAiLz48cG9seWdvbiBwb2ludHM9IjUsMzUgMCw0MCAwLDY2IDIsNjggMTAsNjAgMTAsNDAiIHN0eWxlPSJvcGFjaXR5OiAwLjIiLz48cG9seWdvbiBwb2ludHM9IjIsNjggMTAsNjAgMzAsNjAgMzgsNjggMzYsNzAgNCw3MCIgc3R5bGU9Im9wYWNpdHk6IDAuMiIvPjxwb2x5Z29uIHBvaW50cz0iMzUsMzUgMzAsNDAgMzAsNjAgMzgsNjggNDAsNjYgNDAsNDAiIHN0eWxlPSJvcGFjaXR5OiAxLjAiLz48L2c+PC9zdmc+');
            }
            .five {
                background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNzAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxtYXNrIGlkPSJib3JkZXJzIj48ZyBmaWxsPSIjZmZmZmZmIj48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iNDAiIGhlaWdodD0iNzAiLz48L2c+PGcgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjEiPjxsaW5lIHgxPSIwIiB5MT0iMCIgeDI9IjUwIiB5Mj0iNTAiLz48bGluZSB4MT0iNDAiIHkxPSIwIiB4Mj0iLTEwIiB5Mj0iNTAiLz48bGluZSB4MT0iMCIgeTE9IjcwIiB4Mj0iNDUiIHkyPSIyNSIvPjxsaW5lIHgxPSI0MCIgeTE9IjcwIiB4Mj0iLTUiIHkyPSIyNSIvPjwvZz48L21hc2s+PC9kZWZzPjxnIGZpbGw9IiMwMDAwMDAiIG1hc2s9InVybCgjYm9yZGVycykiPjxwb2x5Z29uIHBvaW50cz0iMiwyIDAsNCAwLDMwIDUsMzUgMTAsMzAgMTAsMTAiIHN0eWxlPSJvcGFjaXR5OiAxLjAiLz48cG9seWdvbiBwb2ludHM9IjIsMiA0LDAgMzYsMCAzOCwyIDMwLDEwIDEwLDEwIiBzdHlsZT0ib3BhY2l0eTogMS4wIi8+PHBvbHlnb24gcG9pbnRzPSIzOCwyIDMwLDEwIDMwLDMwIDM1LDM1IDQwLDMwIDQwLDQiIHN0eWxlPSJvcGFjaXR5OiAwLjIiLz48cG9seWdvbiBwb2ludHM9IjUsMzUgMTAsMzAgMzAsMzAgMzUsMzUgMzAsNDAgMTAsNDAiIHN0eWxlPSJvcGFjaXR5OiAxLjAiLz48cG9seWdvbiBwb2ludHM9IjUsMzUgMCw0MCAwLDY2IDIsNjggMTAsNjAgMTAsNDAiIHN0eWxlPSJvcGFjaXR5OiAwLjIiLz48cG9seWdvbiBwb2ludHM9IjIsNjggMTAsNjAgMzAsNjAgMzgsNjggMzYsNzAgNCw3MCIgc3R5bGU9Im9wYWNpdHk6IDEuMCIvPjxwb2x5Z29uIHBvaW50cz0iMzUsMzUgMzAsNDAgMzAsNjAgMzgsNjggNDAsNjYgNDAsNDAiIHN0eWxlPSJvcGFjaXR5OiAxLjAiLz48L2c+PC9zdmc+');
            }
            .six {
                background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNzAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxtYXNrIGlkPSJib3JkZXJzIj48ZyBmaWxsPSIjZmZmZmZmIj48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iNDAiIGhlaWdodD0iNzAiLz48L2c+PGcgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjEiPjxsaW5lIHgxPSIwIiB5MT0iMCIgeDI9IjUwIiB5Mj0iNTAiLz48bGluZSB4MT0iNDAiIHkxPSIwIiB4Mj0iLTEwIiB5Mj0iNTAiLz48bGluZSB4MT0iMCIgeTE9IjcwIiB4Mj0iNDUiIHkyPSIyNSIvPjxsaW5lIHgxPSI0MCIgeTE9IjcwIiB4Mj0iLTUiIHkyPSIyNSIvPjwvZz48L21hc2s+PC9kZWZzPjxnIGZpbGw9IiMwMDAwMDAiIG1hc2s9InVybCgjYm9yZGVycykiPjxwb2x5Z29uIHBvaW50cz0iMiwyIDAsNCAwLDMwIDUsMzUgMTAsMzAgMTAsMTAiIHN0eWxlPSJvcGFjaXR5OiAxLjAiLz48cG9seWdvbiBwb2ludHM9IjIsMiA0LDAgMzYsMCAzOCwyIDMwLDEwIDEwLDEwIiBzdHlsZT0ib3BhY2l0eTogMS4wIi8+PHBvbHlnb24gcG9pbnRzPSIzOCwyIDMwLDEwIDMwLDMwIDM1LDM1IDQwLDMwIDQwLDQiIHN0eWxlPSJvcGFjaXR5OiAwLjIiLz48cG9seWdvbiBwb2ludHM9IjUsMzUgMTAsMzAgMzAsMzAgMzUsMzUgMzAsNDAgMTAsNDAiIHN0eWxlPSJvcGFjaXR5OiAxLjAiLz48cG9seWdvbiBwb2ludHM9IjUsMzUgMCw0MCAwLDY2IDIsNjggMTAsNjAgMTAsNDAiIHN0eWxlPSJvcGFjaXR5OiAxLjAiLz48cG9seWdvbiBwb2ludHM9IjIsNjggMTAsNjAgMzAsNjAgMzgsNjggMzYsNzAgNCw3MCIgc3R5bGU9Im9wYWNpdHk6IDEuMCIvPjxwb2x5Z29uIHBvaW50cz0iMzUsMzUgMzAsNDAgMzAsNjAgMzgsNjggNDAsNjYgNDAsNDAiIHN0eWxlPSJvcGFjaXR5OiAxLjAiLz48L2c+PC9zdmc+');
            }
            .seven {
                background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNzAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxtYXNrIGlkPSJib3JkZXJzIj48ZyBmaWxsPSIjZmZmZmZmIj48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iNDAiIGhlaWdodD0iNzAiLz48L2c+PGcgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjEiPjxsaW5lIHgxPSIwIiB5MT0iMCIgeDI9IjUwIiB5Mj0iNTAiLz48bGluZSB4MT0iNDAiIHkxPSIwIiB4Mj0iLTEwIiB5Mj0iNTAiLz48bGluZSB4MT0iMCIgeTE9IjcwIiB4Mj0iNDUiIHkyPSIyNSIvPjxsaW5lIHgxPSI0MCIgeTE9IjcwIiB4Mj0iLTUiIHkyPSIyNSIvPjwvZz48L21hc2s+PC9kZWZzPjxnIGZpbGw9IiMwMDAwMDAiIG1hc2s9InVybCgjYm9yZGVycykiPjxwb2x5Z29uIHBvaW50cz0iMiwyIDAsNCAwLDMwIDUsMzUgMTAsMzAgMTAsMTAiIHN0eWxlPSJvcGFjaXR5OiAwLjIiLz48cG9seWdvbiBwb2ludHM9IjIsMiA0LDAgMzYsMCAzOCwyIDMwLDEwIDEwLDEwIiBzdHlsZT0ib3BhY2l0eTogMS4wIi8+PHBvbHlnb24gcG9pbnRzPSIzOCwyIDMwLDEwIDMwLDMwIDM1LDM1IDQwLDMwIDQwLDQiIHN0eWxlPSJvcGFjaXR5OiAxLjAiLz48cG9seWdvbiBwb2ludHM9IjUsMzUgMTAsMzAgMzAsMzAgMzUsMzUgMzAsNDAgMTAsNDAiIHN0eWxlPSJvcGFjaXR5OiAwLjIiLz48cG9seWdvbiBwb2ludHM9IjUsMzUgMCw0MCAwLDY2IDIsNjggMTAsNjAgMTAsNDAiIHN0eWxlPSJvcGFjaXR5OiAwLjIiLz48cG9seWdvbiBwb2ludHM9IjIsNjggMTAsNjAgMzAsNjAgMzgsNjggMzYsNzAgNCw3MCIgc3R5bGU9Im9wYWNpdHk6IDAuMiIvPjxwb2x5Z29uIHBvaW50cz0iMzUsMzUgMzAsNDAgMzAsNjAgMzgsNjggNDAsNjYgNDAsNDAiIHN0eWxlPSJvcGFjaXR5OiAxLjAiLz48L2c+PC9zdmc+');
            }
            .eight {
                background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNzAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxtYXNrIGlkPSJib3JkZXJzIj48ZyBmaWxsPSIjZmZmZmZmIj48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iNDAiIGhlaWdodD0iNzAiLz48L2c+PGcgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjEiPjxsaW5lIHgxPSIwIiB5MT0iMCIgeDI9IjUwIiB5Mj0iNTAiLz48bGluZSB4MT0iNDAiIHkxPSIwIiB4Mj0iLTEwIiB5Mj0iNTAiLz48bGluZSB4MT0iMCIgeTE9IjcwIiB4Mj0iNDUiIHkyPSIyNSIvPjxsaW5lIHgxPSI0MCIgeTE9IjcwIiB4Mj0iLTUiIHkyPSIyNSIvPjwvZz48L21hc2s+PC9kZWZzPjxnIGZpbGw9IiMwMDAwMDAiIG1hc2s9InVybCgjYm9yZGVycykiPjxwb2x5Z29uIHBvaW50cz0iMiwyIDAsNCAwLDMwIDUsMzUgMTAsMzAgMTAsMTAiIHN0eWxlPSJvcGFjaXR5OiAxLjAiLz48cG9seWdvbiBwb2ludHM9IjIsMiA0LDAgMzYsMCAzOCwyIDMwLDEwIDEwLDEwIiBzdHlsZT0ib3BhY2l0eTogMS4wIi8+PHBvbHlnb24gcG9pbnRzPSIzOCwyIDMwLDEwIDMwLDMwIDM1LDM1IDQwLDMwIDQwLDQiIHN0eWxlPSJvcGFjaXR5OiAxLjAiLz48cG9seWdvbiBwb2ludHM9IjUsMzUgMTAsMzAgMzAsMzAgMzUsMzUgMzAsNDAgMTAsNDAiIHN0eWxlPSJvcGFjaXR5OiAxLjAiLz48cG9seWdvbiBwb2ludHM9IjUsMzUgMCw0MCAwLDY2IDIsNjggMTAsNjAgMTAsNDAiIHN0eWxlPSJvcGFjaXR5OiAxLjAiLz48cG9seWdvbiBwb2ludHM9IjIsNjggMTAsNjAgMzAsNjAgMzgsNjggMzYsNzAgNCw3MCIgc3R5bGU9Im9wYWNpdHk6IDEuMCIvPjxwb2x5Z29uIHBvaW50cz0iMzUsMzUgMzAsNDAgMzAsNjAgMzgsNjggNDAsNjYgNDAsNDAiIHN0eWxlPSJvcGFjaXR5OiAxLjAiLz48L2c+PC9zdmc+');
            }
            .nine {
                background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNzAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxtYXNrIGlkPSJib3JkZXJzIj48ZyBmaWxsPSIjZmZmZmZmIj48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iNDAiIGhlaWdodD0iNzAiLz48L2c+PGcgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjEiPjxsaW5lIHgxPSIwIiB5MT0iMCIgeDI9IjUwIiB5Mj0iNTAiLz48bGluZSB4MT0iNDAiIHkxPSIwIiB4Mj0iLTEwIiB5Mj0iNTAiLz48bGluZSB4MT0iMCIgeTE9IjcwIiB4Mj0iNDUiIHkyPSIyNSIvPjxsaW5lIHgxPSI0MCIgeTE9IjcwIiB4Mj0iLTUiIHkyPSIyNSIvPjwvZz48L21hc2s+PC9kZWZzPjxnIGZpbGw9IiMwMDAwMDAiIG1hc2s9InVybCgjYm9yZGVycykiPjxwb2x5Z29uIHBvaW50cz0iMiwyIDAsNCAwLDMwIDUsMzUgMTAsMzAgMTAsMTAiIHN0eWxlPSJvcGFjaXR5OiAxLjAiLz48cG9seWdvbiBwb2ludHM9IjIsMiA0LDAgMzYsMCAzOCwyIDMwLDEwIDEwLDEwIiBzdHlsZT0ib3BhY2l0eTogMS4wIi8+PHBvbHlnb24gcG9pbnRzPSIzOCwyIDMwLDEwIDMwLDMwIDM1LDM1IDQwLDMwIDQwLDQiIHN0eWxlPSJvcGFjaXR5OiAxLjAiLz48cG9seWdvbiBwb2ludHM9IjUsMzUgMTAsMzAgMzAsMzAgMzUsMzUgMzAsNDAgMTAsNDAiIHN0eWxlPSJvcGFjaXR5OiAxLjAiLz48cG9seWdvbiBwb2ludHM9IjUsMzUgMCw0MCAwLDY2IDIsNjggMTAsNjAgMTAsNDAiIHN0eWxlPSJvcGFjaXR5OiAwLjIiLz48cG9seWdvbiBwb2ludHM9IjIsNjggMTAsNjAgMzAsNjAgMzgsNjggMzYsNzAgNCw3MCIgc3R5bGU9Im9wYWNpdHk6IDEuMCIvPjxwb2x5Z29uIHBvaW50cz0iMzUsMzUgMzAsNDAgMzAsNjAgMzgsNjggNDAsNjYgNDAsNDAiIHN0eWxlPSJvcGFjaXR5OiAxLjAiLz48L2c+PC9zdmc+');
            }
        </style>
        <script>

            const DEFAULT_ANIMATION_DELAY = 50;
            const DISPLAY_HEIGHT = 20;
            const DISPLAY_WIDTH = 10;
            const PREVIEW_HEIGHT = 4;
            const PREVIEW_WIDTH = 4;

            const MENU_LIST = [
                [tetrisAnimation, runTetris],
                [raceAnimation, runRace]
            ];

            const DISPLAY_MATRIX = [
                [false, false, false, false, false, false, false, false, false, false],
                [false, false, false, false, false, false, false, false, false, false],
                [false, false, false, false, false, false, false, false, false, false],
                [false, false, false, false, false, false, false, false, false, false],
                [false, false, false, false, false, false, false, false, false, false],
                [false, false, false, false, false, false, false, false, false, false],
                [false, false, false, false, false, false, false, false, false, false],
                [false, false, false, false, false, false, false, false, false, false],
                [false, false, false, false, false, false, false, false, false, false],
                [false, false, false, false, false, false, false, false, false, false],
                [false, false, false, false, false, false, false, false, false, false],
                [false, false, false, false, false, false, false, false, false, false],
                [false, false, false, false, false, false, false, false, false, false],
                [false, false, false, false, false, false, false, false, false, false],
                [false, false, false, false, false, false, false, false, false, false],
                [false, false, false, false, false, false, false, false, false, false],
                [false, false, false, false, false, false, false, false, false, false],
                [false, false, false, false, false, false, false, false, false, false],
                [false, false, false, false, false, false, false, false, false, false],
                [false, false, false, false, false, false, false, false, false, false]
            ];

            const PREVIEW_MATRIX = [
                [false, false, false, false],
                [false, false, false, false],
                [false, false, false, false],
                [false, false, false, false]
            ];

            const LETTER_A = [
                [0, 1], [0, 2], [0, 3],
                [1, 0], [1, 1], [1, 3], [1, 4],
                [2, 0], [2, 1], [2, 3], [2, 4],
                [3, 0], [3, 1], [3, 3], [3, 4],
                [4, 0], [4, 1], [4, 3], [4, 4],
                [5, 0], [5, 1], [5, 2], [5, 3], [5, 4],
                [6, 0], [6, 1], [6, 3], [6, 4],
                [7, 0], [7, 1], [7, 3], [7, 4]
            ];

            const LETTER_B = [
                [0, 0], [0, 1], [0, 2], [0, 3],
                [1, 0], [1, 1], [1, 3], [1, 4],
                [2, 0], [2, 1], [2, 3], [2, 4],
                [3, 0], [3, 1], [3, 2], [3, 3],
                [4, 0], [4, 1], [4, 3], [4, 4],
                [5, 0], [5, 1], [5, 3], [5, 4],
                [6, 0], [6, 1], [6, 3], [6, 4],
                [7, 0], [7, 1], [7, 2], [7, 3]
            ];

            const LETTER_C = [
                [0, 1], [0, 2], [0, 3],
                [1, 0], [1, 1], [1, 3], [1, 4],
                [2, 0], [2, 1], [2, 3], [2, 4],
                [3, 0], [3, 1],
                [4, 0], [4, 1],
                [5, 0], [5, 1], [5, 3], [5, 4],
                [6, 0], [6, 1], [6, 3], [6, 4],
                [7, 1], [7, 2], [7, 3]
            ];

            const LETTER_D = [
                [0, 0], [0, 1], [0, 2], [0, 3],
                [1, 0], [1, 1], [1, 3], [1, 4],
                [2, 0], [2, 1], [2, 3], [2, 4],
                [3, 0], [3, 1], [3, 3], [3, 4],
                [4, 0], [4, 1], [4, 3], [4, 4],
                [5, 0], [5, 1], [5, 3], [5, 4],
                [6, 0], [6, 1], [6, 3], [6, 4],
                [7, 0], [7, 1], [7, 2], [7, 3]
            ];

            const LETTER_G = [
                [0, 1], [0, 2], [0, 3],
                [1, 0], [1, 1], [1, 3], [1, 4],
                [2, 0], [2, 1], [2, 3], [2, 4],
                [3, 0], [3, 1],
                [4, 0], [4, 1],
                [5, 0], [5, 1], [5, 2], [5, 3], [5, 4],
                [6, 0], [6, 1], [6, 3], [6, 4],
                [7, 1], [7, 2], [7, 3], [7, 4]
            ];

            const LETTER_I = [
                [0, 2], [0, 3],
                [1, 2], [1, 3],
                [2, 2], [2, 3],
                [3, 2], [3, 3],
                [4, 2], [4, 3],
                [5, 2], [5, 3],
                [6, 2], [6, 3],
                [7, 2], [7, 3],
            ];

            const LETTER_K = [
                [0, 0], [0, 1], [0, 3], [0, 4],
                [1, 0], [1, 1], [1, 3], [1, 4],
                [2, 0], [2, 1], [2, 3], [2, 4],
                [3, 0], [3, 1], [3, 2], [3, 3],
                [4, 0], [4, 1], [4, 3], [4, 4],
                [5, 0], [5, 1], [5, 3], [5, 4],
                [6, 0], [6, 1], [6, 3], [6, 4],
                [7, 0], [7, 1], [7, 3], [7, 4]
            ];

            const LETTER_R = [
                [0, 0], [0, 1], [0, 2], [0, 3],
                [1, 0], [1, 1], [1, 3], [1, 4],
                [2, 0], [2, 1], [2, 3], [2, 4],
                [3, 0], [3, 1], [3, 2], [3, 3],
                [4, 0], [4, 1], [4, 3], [4, 4],
                [5, 0], [5, 1], [5, 3], [5, 4],
                [6, 0], [6, 1], [6, 3], [6, 4],
                [7, 0], [7, 1], [7, 3], [7, 4]
            ];

            var score = 0;
            var hiscore = 0;
            var level = 0;

            var paused = false;

            var gameLoop = null;
            var menuLoop = null;
            var pauseLoop = null;
            var levelLoop = null;
            var previewLoop = null;
            var animationLoop = null;
            var instructionLoop = null;

            var onSpacePressed = null;
            var onArrowUpPressed = null;
            var onArrowDownPressed = null;
            var onArrowLeftPressed = null;
            var onArrowRightPressed = null;

            var onSpaceReleased = null;
            var onArrowUpReleased = null;
            var onArrowDownReleased = null;
            var onArrowLeftReleased = null;
            var onArrowRightReleased = null;

            var onGamePaused = null;
            var onGameResumed = null

            var spaceFlag = false;
            var arrowUpFlag = false;
            var arrowDownFlag = false;
            var arrowLeftFlag = false;
            var arrowRightFlag = false;

            function clearKeyboardEvents() {                
                onSpacePressed = null;
                onArrowUpPressed = null;
                onArrowDownPressed = null;
                onArrowLeftPressed = null;
                onArrowRightPressed = null;
                onSpaceReleased = null;
                onArrowUpReleased = null;
                onArrowDownReleased = null;
                onArrowLeftReleased = null;
                onArrowRightReleased = null;
                onGamePaused = null;
                onGameResumed = null;
            }

            function onKeyPressed(event) {
                var oldFlag;
                switch (event.code) {
                    case "KeyP":
                    case "Escape":
                        if (onGamePaused && onGameResumed) {
                            if (paused) {
                                turnPauseAnimationOff();
                                paused = false;
                                onGameResumed();
                            } else {
                                turnPauseAnimationOn();
                                paused = true;
                                onGamePaused();
                            }
                        }
                        break;
                    case "Space":
                        if (!paused) {
                            oldFlag = spaceFlag;
                            spaceFlag = true;
                            !oldFlag && onSpacePressed && onSpacePressed();
                        }
                        break;
                    case "ArrowUp":
                        if (!paused) {
                            oldFlag = arrowUpFlag;
                            arrowUpFlag = true;
                            !oldFlag && onArrowUpPressed && onArrowUpPressed();
                        }
                        break;
                    case "ArrowDown":
                        if (!paused) {
                            oldFlag = arrowDownFlag;
                            arrowDownFlag = true;
                            !oldFlag && onArrowDownPressed && onArrowDownPressed();
                        }
                        break;
                    case "ArrowLeft":
                        if (!paused) {
                            oldFlag = arrowLeftFlag;
                            arrowLeftFlag = true;
                            !oldFlag && onArrowLeftPressed && onArrowLeftPressed();
                        }
                        break;
                    case "ArrowRight":
                        if (!paused) {
                            oldFlag = arrowRightFlag;
                            arrowRightFlag = true;
                            !oldFlag && onArrowRightPressed && onArrowRightPressed();
                        }
                        break;
                    case "KeyR":
                        resetGame();
                        break;
                    case "KeyA":
                        showAbout();
                        break;
                }
            }

            function onKeyReleased(event) {
                if (paused)
                    return;
                switch (event.code) {
                    case "Space":
                        spaceFlag = false;
                        onSpaceReleased && onSpaceReleased();
                        break;
                    case "ArrowUp":
                        arrowUpFlag = false;
                        onArrowUpReleased && onArrowUpReleased();
                        break;
                    case "ArrowDown":
                        arrowDownFlag = false;  
                        onArrowDownReleased && onArrowDownReleased();
                        break;
                    case "ArrowLeft":
                        arrowLeftFlag = false;
                        onArrowLeftReleased && onArrowLeftReleased();
                        break;
                    case "ArrowRight":
                        arrowRightFlag = false;
                        onArrowRightReleased && onArrowRightReleased();
                        break;
                }
            }

            function showAbout() {
                const ABOUT_MATRIX_BASE64 = "" +
                    "W1tmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZ" + 
                    "Sx0cnVlLHRydWUsdHJ1ZSxmYWxzZSxmYWxzZSx0cnVlLHRydWUsZmFsc2UsZmFsc2UsdHJ1ZSxmYWxzZSxmYWxzZS" + 
                    "xmYWxzZSx0cnVlLGZhbHNlLHRydWUsdHJ1ZSx0cnVlLHRydWUsZmFsc2UsZmFsc2UsZmFsc2UsZmFsc2UsZmFsc2U" + 
                    "sdHJ1ZSx0cnVlLHRydWUsZmFsc2UsdHJ1ZSx0cnVlLHRydWUsZmFsc2UsZmFsc2UsdHJ1ZSx0cnVlLHRydWUsdHJ1" + 
                    "ZSxmYWxzZSxmYWxzZSx0cnVlLHRydWUsZmFsc2UsZmFsc2UsdHJ1ZSx0cnVlLHRydWUsdHJ1ZSx0cnVlLGZhbHNlL" + 
                    "HRydWUsdHJ1ZSx0cnVlLHRydWUsZmFsc2UsdHJ1ZSx0cnVlLHRydWUsZmFsc2UsZmFsc2UsZmFsc2UsZmFsc2UsZm" + 
                    "Fsc2UsdHJ1ZSx0cnVlLHRydWUsZmFsc2UsZmFsc2UsdHJ1ZSxmYWxzZSxmYWxzZSxmYWxzZSx0cnVlLGZhbHNlLGZ" + 
                    "hbHNlLGZhbHNlLGZhbHNlLHRydWUsZmFsc2UsZmFsc2UsZmFsc2UsZmFsc2UsdHJ1ZSxmYWxzZSxmYWxzZSx0cnVl" + 
                    "LGZhbHNlLGZhbHNlLHRydWUsdHJ1ZSx0cnVlLGZhbHNlLGZhbHNlLHRydWUsdHJ1ZSxmYWxzZSxmYWxzZSxmYWxzZ" + 
                    "Sx0cnVlLHRydWUsdHJ1ZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSx0cnVlLHRydWUsdHJ1ZSxmYWxzZS" + 
                    "xmYWxzZSx0cnVlLHRydWUsZmFsc2UsZmFsc2UsdHJ1ZSx0cnVlLHRydWUsZmFsc2UsZmFsc2UsdHJ1ZSx0cnVlLHR" + 
                    "ydWUsZmFsc2UsZmFsc2UsdHJ1ZSx0cnVlLHRydWUsdHJ1ZSxmYWxzZSx0cnVlLGZhbHNlLHRydWUsdHJ1ZSx0cnVl" + 
                    "LGZhbHNlLGZhbHNlLGZhbHNlLHRydWUsdHJ1ZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSx0cnVlLHRyd" + 
                    "WUsdHJ1ZSxmYWxzZSxmYWxzZSx0cnVlLGZhbHNlLHRydWUsZmFsc2UsZmFsc2UsZmFsc2UsdHJ1ZSxmYWxzZSx0cn" + 
                    "VlLGZhbHNlLGZhbHNlLHRydWUsZmFsc2UsdHJ1ZSx0cnVlLHRydWUsdHJ1ZSxmYWxzZSx0cnVlLGZhbHNlLHRydWU" + 
                    "sdHJ1ZSx0cnVlLGZhbHNlLGZhbHNlLGZhbHNlLHRydWUsdHJ1ZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxz" + 
                    "ZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZV0sW2ZhbHNlLGZhbHNlLGZhbHNlLGZhb" + 
                    "HNlLGZhbHNlLGZhbHNlLGZhbHNlLGZhbHNlLGZhbHNlLGZhbHNlLHRydWUsZmFsc2UsZmFsc2UsZmFsc2UsZmFsc2" + 
                    "UsdHJ1ZSxmYWxzZSxmYWxzZSx0cnVlLGZhbHNlLHRydWUsdHJ1ZSxmYWxzZSx0cnVlLHRydWUsZmFsc2UsdHJ1ZSx" +
                    "mYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSx0cnVlLGZhbHNlLGZhbHNlLGZhbHNlLGZh" + 
                    "bHNlLHRydWUsZmFsc2UsZmFsc2UsdHJ1ZSxmYWxzZSx0cnVlLGZhbHNlLGZhbHNlLGZhbHNlLGZhbHNlLHRydWUsZ" + 
                    "mFsc2UsZmFsc2UsdHJ1ZSxmYWxzZSxmYWxzZSxmYWxzZSx0cnVlLGZhbHNlLGZhbHNlLGZhbHNlLHRydWUsZmFsc2" + 
                    "UsZmFsc2UsZmFsc2UsZmFsc2UsdHJ1ZSxmYWxzZSxmYWxzZSx0cnVlLGZhbHNlLGZhbHNlLGZhbHNlLGZhbHNlLHR" + 
                    "ydWUsZmFsc2UsZmFsc2UsdHJ1ZSxmYWxzZSxmYWxzZSx0cnVlLGZhbHNlLHRydWUsZmFsc2UsZmFsc2UsZmFsc2Us" + 
                    "ZmFsc2UsZmFsc2UsdHJ1ZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSx0cnVlLGZhbHNlLGZhbHNlLHRydWUsZmFsc" + 
                    "2UsdHJ1ZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSx0cnVlLGZhbHNlLGZhbHNlLHRydWUsZmFsc2UsdHJ1ZSxmYW" + 
                    "xzZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSx0cnVlLGZhbHNlLGZhbHNlLGZhbHNlLGZhbHN" + 
                    "lLHRydWUsZmFsc2UsZmFsc2UsdHJ1ZSxmYWxzZSx0cnVlLGZhbHNlLGZhbHNlLHRydWUsZmFsc2UsdHJ1ZSxmYWxz" + 
                    "ZSxmYWxzZSx0cnVlLGZhbHNlLHRydWUsZmFsc2UsZmFsc2UsZmFsc2UsZmFsc2UsdHJ1ZSxmYWxzZSx0cnVlLGZhb" + 
                    "HNlLGZhbHNlLHRydWUsZmFsc2UsdHJ1ZSxmYWxzZSxmYWxzZSx0cnVlLGZhbHNlLGZhbHNlLGZhbHNlLGZhbHNlLH" + 
                    "RydWUsZmFsc2UsZmFsc2UsdHJ1ZSxmYWxzZSx0cnVlLGZhbHNlLHRydWUsdHJ1ZSxmYWxzZSxmYWxzZSx0cnVlLGZ" + 
                    "hbHNlLHRydWUsZmFsc2UsZmFsc2UsdHJ1ZSxmYWxzZSx0cnVlLGZhbHNlLGZhbHNlLGZhbHNlLGZhbHNlLHRydWUs" + 
                    "ZmFsc2UsdHJ1ZSxmYWxzZSxmYWxzZSx0cnVlLGZhbHNlLHRydWUsZmFsc2UsZmFsc2UsdHJ1ZSxmYWxzZSxmYWxzZ" + 
                    "SxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZV0sW2ZhbHNlLGZhbH" + 
                    "NlLGZhbHNlLGZhbHNlLGZhbHNlLGZhbHNlLGZhbHNlLGZhbHNlLGZhbHNlLGZhbHNlLHRydWUsZmFsc2UsdHJ1ZSx" + 
                    "0cnVlLGZhbHNlLHRydWUsZmFsc2UsZmFsc2UsdHJ1ZSxmYWxzZSx0cnVlLGZhbHNlLHRydWUsZmFsc2UsdHJ1ZSxm" + 
                    "YWxzZSx0cnVlLHRydWUsdHJ1ZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSx0cnVlLGZhbHNlLGZhbHNlL" + 
                    "GZhbHNlLGZhbHNlLHRydWUsdHJ1ZSx0cnVlLGZhbHNlLGZhbHNlLHRydWUsdHJ1ZSx0cnVlLGZhbHNlLGZhbHNlLH" + 
                    "RydWUsZmFsc2UsZmFsc2UsdHJ1ZSxmYWxzZSxmYWxzZSxmYWxzZSx0cnVlLGZhbHNlLGZhbHNlLGZhbHNlLHRydWU" + 
                    "sdHJ1ZSx0cnVlLGZhbHNlLGZhbHNlLHRydWUsZmFsc2UsZmFsc2UsdHJ1ZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxz" + 
                    "ZSx0cnVlLHRydWUsdHJ1ZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSx0cnVlLGZhbHNlLGZhbHNlLGZhbHNlLGZhb" + 
                    "HNlLGZhbHNlLGZhbHNlLHRydWUsZmFsc2UsZmFsc2UsZmFsc2UsZmFsc2UsdHJ1ZSxmYWxzZSxmYWxzZSx0cnVlLG" + 
                    "ZhbHNlLHRydWUsZmFsc2UsZmFsc2UsZmFsc2UsZmFsc2UsdHJ1ZSxmYWxzZSxmYWxzZSx0cnVlLGZhbHNlLGZhbHN" + 
                    "lLHRydWUsdHJ1ZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSx0cnVlLGZhbHNlLGZhbHNlLGZhbHNlLGZh" + 
                    "bHNlLHRydWUsZmFsc2UsZmFsc2UsdHJ1ZSxmYWxzZSx0cnVlLHRydWUsdHJ1ZSxmYWxzZSxmYWxzZSx0cnVlLHRyd" + 
                    "WUsdHJ1ZSxmYWxzZSxmYWxzZSx0cnVlLHRydWUsdHJ1ZSxmYWxzZSxmYWxzZSx0cnVlLGZhbHNlLHRydWUsdHJ1ZS" + 
                    "x0cnVlLGZhbHNlLGZhbHNlLHRydWUsZmFsc2UsZmFsc2UsdHJ1ZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSx0cnV" + 
                    "lLHRydWUsdHJ1ZSxmYWxzZSxmYWxzZSx0cnVlLGZhbHNlLHRydWUsZmFsc2UsdHJ1ZSxmYWxzZSx0cnVlLGZhbHNl" + 
                    "LHRydWUsdHJ1ZSx0cnVlLHRydWUsZmFsc2UsdHJ1ZSx0cnVlLHRydWUsZmFsc2UsZmFsc2UsdHJ1ZSxmYWxzZSx0c" + 
                    "nVlLHRydWUsdHJ1ZSxmYWxzZSxmYWxzZSx0cnVlLGZhbHNlLGZhbHNlLHRydWUsZmFsc2UsZmFsc2UsZmFsc2UsZm" + 
                    "Fsc2UsZmFsc2UsZmFsc2UsZmFsc2UsZmFsc2UsZmFsc2UsZmFsc2UsZmFsc2VdLFtmYWxzZSxmYWxzZSxmYWxzZSx" + 
                    "mYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSx0cnVlLGZhbHNlLGZhbHNlLHRydWUsZmFs" + 
                    "c2UsdHJ1ZSx0cnVlLHRydWUsdHJ1ZSxmYWxzZSx0cnVlLGZhbHNlLGZhbHNlLGZhbHNlLHRydWUsZmFsc2UsdHJ1Z" + 
                    "SxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSx0cnVlLGZhbHNlLGZhbHNlLGZhbHNlLG" + 
                    "ZhbHNlLHRydWUsZmFsc2UsZmFsc2UsdHJ1ZSxmYWxzZSx0cnVlLGZhbHNlLGZhbHNlLGZhbHNlLGZhbHNlLHRydWU" + 
                    "sdHJ1ZSx0cnVlLHRydWUsZmFsc2UsZmFsc2UsZmFsc2UsdHJ1ZSxmYWxzZSxmYWxzZSxmYWxzZSx0cnVlLGZhbHNl" + 
                    "LGZhbHNlLGZhbHNlLGZhbHNlLHRydWUsZmFsc2UsZmFsc2UsdHJ1ZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSx0c" + 
                    "nVlLGZhbHNlLGZhbHNlLHRydWUsZmFsc2UsZmFsc2UsZmFsc2UsdHJ1ZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZS" + 
                    "xmYWxzZSxmYWxzZSx0cnVlLGZhbHNlLGZhbHNlLGZhbHNlLGZhbHNlLHRydWUsZmFsc2UsZmFsc2UsdHJ1ZSxmYWx" + 
                    "zZSx0cnVlLGZhbHNlLGZhbHNlLGZhbHNlLGZhbHNlLHRydWUsdHJ1ZSx0cnVlLHRydWUsZmFsc2UsZmFsc2UsZmFs" + 
                    "c2UsZmFsc2UsdHJ1ZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSx0cnVlLGZhbHNlLGZhbHNlLGZhbHNlLGZhbHNlL" + 
                    "HRydWUsdHJ1ZSx0cnVlLHRydWUsZmFsc2UsdHJ1ZSxmYWxzZSxmYWxzZSx0cnVlLGZhbHNlLHRydWUsZmFsc2UsZm" + 
                    "Fsc2UsdHJ1ZSxmYWxzZSx0cnVlLGZhbHNlLGZhbHNlLGZhbHNlLGZhbHNlLHRydWUsZmFsc2UsdHJ1ZSxmYWxzZSx" + 
                    "mYWxzZSx0cnVlLGZhbHNlLHRydWUsZmFsc2UsZmFsc2UsdHJ1ZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSx0cnVl" + 
                    "LGZhbHNlLGZhbHNlLGZhbHNlLGZhbHNlLHRydWUsZmFsc2UsdHJ1ZSxmYWxzZSxmYWxzZSx0cnVlLHRydWUsZmFsc" + 
                    "2UsdHJ1ZSxmYWxzZSxmYWxzZSx0cnVlLGZhbHNlLHRydWUsZmFsc2UsZmFsc2UsZmFsc2UsZmFsc2UsdHJ1ZSxmYW" + 
                    "xzZSx0cnVlLGZhbHNlLGZhbHNlLHRydWUsZmFsc2UsdHJ1ZSxmYWxzZSxmYWxzZSx0cnVlLGZhbHNlLGZhbHNlLGZ" + 
                    "hbHNlLGZhbHNlLGZhbHNlLGZhbHNlLGZhbHNlLGZhbHNlLGZhbHNlLGZhbHNlLGZhbHNlXSxbZmFsc2UsZmFsc2Us" + 
                    "ZmFsc2UsZmFsc2UsZmFsc2UsZmFsc2UsZmFsc2UsZmFsc2UsZmFsc2UsZmFsc2UsZmFsc2UsdHJ1ZSx0cnVlLHRyd" + 
                    "WUsZmFsc2UsdHJ1ZSxmYWxzZSxmYWxzZSx0cnVlLGZhbHNlLHRydWUsZmFsc2UsZmFsc2UsZmFsc2UsdHJ1ZSxmYW" + 
                    "xzZSx0cnVlLHRydWUsdHJ1ZSx0cnVlLGZhbHNlLGZhbHNlLGZhbHNlLGZhbHNlLGZhbHNlLHRydWUsdHJ1ZSx0cnV" + 
                    "lLGZhbHNlLHRydWUsZmFsc2UsZmFsc2UsdHJ1ZSxmYWxzZSx0cnVlLHRydWUsdHJ1ZSx0cnVlLGZhbHNlLHRydWUs" + 
                    "ZmFsc2UsZmFsc2UsdHJ1ZSxmYWxzZSxmYWxzZSxmYWxzZSx0cnVlLGZhbHNlLGZhbHNlLGZhbHNlLHRydWUsdHJ1Z" + 
                    "Sx0cnVlLHRydWUsZmFsc2UsdHJ1ZSx0cnVlLHRydWUsZmFsc2UsZmFsc2UsZmFsc2UsZmFsc2UsZmFsc2UsdHJ1ZS" + 
                    "x0cnVlLHRydWUsZmFsc2UsZmFsc2UsZmFsc2UsZmFsc2UsdHJ1ZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSxmYWx" + 
                    "zZSxmYWxzZSx0cnVlLHRydWUsdHJ1ZSx0cnVlLGZhbHNlLGZhbHNlLHRydWUsdHJ1ZSxmYWxzZSxmYWxzZSxmYWxz" + 
                    "ZSx0cnVlLHRydWUsdHJ1ZSxmYWxzZSx0cnVlLGZhbHNlLGZhbHNlLHRydWUsZmFsc2UsdHJ1ZSx0cnVlLHRydWUsZ" + 
                    "mFsc2UsZmFsc2UsZmFsc2UsZmFsc2UsZmFsc2UsZmFsc2UsdHJ1ZSx0cnVlLHRydWUsZmFsc2UsdHJ1ZSxmYWxzZS" + 
                    "xmYWxzZSx0cnVlLGZhbHNlLHRydWUsZmFsc2UsZmFsc2UsdHJ1ZSxmYWxzZSx0cnVlLGZhbHNlLGZhbHNlLHRydWU" + 
                    "sZmFsc2UsdHJ1ZSx0cnVlLHRydWUsdHJ1ZSxmYWxzZSx0cnVlLGZhbHNlLHRydWUsZmFsc2UsZmFsc2UsdHJ1ZSxm" + 
                    "YWxzZSxmYWxzZSx0cnVlLHRydWUsZmFsc2UsZmFsc2UsZmFsc2UsZmFsc2UsZmFsc2UsdHJ1ZSxmYWxzZSxmYWxzZ" + 
                    "SxmYWxzZSxmYWxzZSx0cnVlLGZhbHNlLHRydWUsZmFsc2UsZmFsc2UsZmFsc2UsdHJ1ZSxmYWxzZSx0cnVlLGZhbH" + 
                    "NlLGZhbHNlLHRydWUsZmFsc2UsdHJ1ZSx0cnVlLHRydWUsdHJ1ZSxmYWxzZSx0cnVlLGZhbHNlLHRydWUsZmFsc2U" + 
                    "sZmFsc2UsdHJ1ZSxmYWxzZSxmYWxzZSx0cnVlLHRydWUsZmFsc2UsZmFsc2UsZmFsc2UsZmFsc2UsZmFsc2UsZmFs" + 
                    "c2UsZmFsc2UsZmFsc2UsZmFsc2UsZmFsc2UsZmFsc2UsZmFsc2VdXQ==";
                const ABOUT_MATRIX = JSON.parse(atob(ABOUT_MATRIX_BASE64));
                if (paused) {
                    turnPauseAnimationOff();
                    paused = false;
                    onGameResumed && onGameResumed();
                }
                clearTimeout(gameLoop);
                clearTimeout(menuLoop);
                clearTimeout(pauseLoop);
                clearTimeout(levelLoop);
                clearTimeout(previewLoop);
                clearTimeout(animationLoop);
                clearTimeout(instructionLoop);
                turnInstructionOff()
                clearKeyboardEvents();
                resetScore();
                resetLevel();
                clearPreview();
                clearDisplay();
                var k = 0;
                function kframe() {
                    if (k > ABOUT_MATRIX[0].length - DISPLAY_WIDTH) {
                        resetGame();
                        return;
                    }
                    for (var i = 0; i < ABOUT_MATRIX.length; ++i)
                        for (var j = 0; j < DISPLAY_WIDTH; ++j) {
                            var x0 = i + 8;
                            var y0 = j;
                            var x1 = i;
                            var y1 = j + k;
                            DISPLAY_MATRIX[x0][y0] = ABOUT_MATRIX[x1][y1];
                        }
                    drawDisplay();
                    ++k;
                    animationLoop = setTimeout(kframe, 250);
                }
                kframe();
            }

            function resetGame() {
                if (paused) {
                    turnPauseAnimationOff();
                    paused = false;
                    onGameResumed && onGameResumed();
                }
                turnInstructionOff()
                clearDisplay();
                gameOver();
            }

            function clearDisplay() {
                for (var i = 0; i < DISPLAY_HEIGHT; ++i)
                    for (var j = 0; j < DISPLAY_WIDTH; ++j) {
                        var cell = document.getElementById('cell_' + i + '_' + j);
                        DISPLAY_MATRIX[i][j] = false;
                        cell.className = 'cell off';
                    }
            }

            function fillDisplay() {
                for (var i = 0; i < DISPLAY_HEIGHT; ++i)
                    for (var j = 0; j < DISPLAY_WIDTH; ++j) {
                        var cell = document.getElementById('cell_' + i + '_' + j);
                        DISPLAY_MATRIX[i][j] = true;
                        cell.className = 'cell on';
                    }
            }

            function clearMatrix() {
                for (var i = 0; i < DISPLAY_HEIGHT; ++i)
                    for (var j = 0; j < DISPLAY_WIDTH; ++j)
                        DISPLAY_MATRIX[i][j] = false;
            }

            function drawDisplay() {
                for (var i = 0; i < DISPLAY_HEIGHT; ++i)
                    for (var j = 0; j < DISPLAY_WIDTH; ++j) {
                        var cell = document.getElementById('cell_' + i + '_' + j);
                        if (DISPLAY_MATRIX[i][j])
                            cell.className = 'cell on';
                        else
                            cell.className = 'cell off';
                    }
            }

            function clearPreview() {
                for (var i = 0; i < PREVIEW_HEIGHT; ++i)
                    for (var j = 0; j < PREVIEW_WIDTH; ++j) {
                        var cell = document.getElementById('prev_' + i + '_' + j);
                        PREVIEW_MATRIX[i][j] = false;
                        cell.className = 'cell off';
                    }
            }

            function drawPreview() {
                for (var i = 0; i < PREVIEW_HEIGHT; ++i)
                    for (var j = 0; j < PREVIEW_WIDTH; ++j) {
                        var cell = document.getElementById('prev_' + i + '_' + j);
                        if (PREVIEW_MATRIX[i][j])
                            cell.className = 'cell on';
                        else
                            cell.className = 'cell off';
                    }
            }

            function drawScore() {
                let quo, mod, idx, elem, str;
                idx = 0;
                quo = score;
                while (idx < 6) {
                    mod = quo % 10;
                    switch (mod) {
                        case 0:
                            str = 'zero';
                            break;
                        case 1:
                            str = 'one';
                            break;
                        case 2:
                            str = 'two';
                            break;
                        case 3:
                            str = 'three';
                            break;
                        case 4:
                            str = 'four';
                            break;
                        case 5:
                            str = 'five';
                            break;
                        case 6:
                            str = 'six';
                            break;
                        case 7:
                            str = 'seven';
                            break;
                        case 8:
                            str = 'eight';
                            break;
                        case 9:
                            str = 'nine';
                            break;
                    }
                    elem = document.getElementById('s-' + idx);
                    elem.className = 'sign ' + str;
                    quo = (quo / 10) >> 0;
                    ++idx;
                }
            }

            function resetScore() {
                score = 0;
                drawScore();
            }

            function incScore(points) {
                score = score + points;
                drawScore();
                if (score > hiscore) {
                    hiscore = score;
                    drawHiscore();
                }
            }

            function drawHiscore() {
                let quo, mod, idx, elem, str;
                idx = 0;
                quo = hiscore;
                while (idx < 6) {
                    mod = quo % 10;
                    switch (mod) {
                        case 0:
                            str = 'zero';
                            break;
                        case 1:
                            str = 'one';
                            break;
                        case 2:
                            str = 'two';
                            break;
                        case 3:
                            str = 'three';
                            break;
                        case 4:
                            str = 'four';
                            break;
                        case 5:
                            str = 'five';
                            break;
                        case 6:
                            str = 'six';
                            break;
                        case 7:
                            str = 'seven';
                            break;
                        case 8:
                            str = 'eight';
                            break;
                        case 9:
                            str = 'nine';
                            break;
                    }
                    elem = document.getElementById('h-' + idx);
                    elem.className = 'sign ' + str;
                    quo = (quo / 10) >> 0;
                    ++idx;
                }
            }

            function clearLevel() {
                for (var i = 0; i < 2; ++i) {
                    elem = document.getElementById('l-' + i);
                    elem.className = 'sign none';
                }
            }

            function drawLevel() {
                let quo, mod, idx, elem, str;
                idx = 0;
                quo = level;
                while (idx < 2) {
                    mod = quo % 10;
                    switch (mod) {
                        case 0:
                            str = 'zero';
                            break;
                        case 1:
                            str = 'one';
                            break;
                        case 2:
                            str = 'two';
                            break;
                        case 3:
                            str = 'three';
                            break;
                        case 4:
                            str = 'four';
                            break;
                        case 5:
                            str = 'five';
                            break;
                        case 6:
                            str = 'six';
                            break;
                        case 7:
                            str = 'seven';
                            break;
                        case 8:
                            str = 'eight';
                            break;
                        case 9:
                            str = 'nine';
                            break;
                    }
                    elem = document.getElementById('l-' + idx);
                    elem.className = 'sign ' + str;
                    quo = (quo / 10) >> 0;
                    ++idx;
                }
            }

            function incLevel() {
                function blinkLevel() {
                    const BLINK = 250;
                    var count = 0;
                    function animOn() {
                        drawLevel();
                        levelLoop = setTimeout(animOff, BLINK);
                    }
                    function animOff() {
                        if (count++ > 2) {
                            levelLoop = null;
                            return;
                        }
                        clearLevel();
                        levelLoop = setTimeout(animOn, BLINK);
                    }
                    animOn();
                }
                ++level;
                blinkLevel();
            }

            function resetLevel() {
                level = 0;
                drawLevel();
            }

            function turnInstructionOn() {
                const BLINK = 500;
                function turnInstOff() {
                    var elem = document.getElementById('instruction');
                    elem.className = 'off';
                    instructionLoop = setTimeout(turnInstOn, BLINK);
                }
                function turnInstOn() {
                    var elem = document.getElementById('instruction');
                    elem.className = 'on';
                    instructionLoop = setTimeout(turnInstOff, BLINK);
                }
                instructionLoop = setTimeout(turnInstOn, BLINK);
            }

            function turnInstructionOff() {
                clearTimeout(instructionLoop);
                var elem = document.getElementById('instruction');
                elem.className = 'off';
            }

            function turnPauseAnimationOn() {
                const BLINK = 500;
                function animPauseOn() {
                    var elem = document.getElementById('pause');
                    elem.className = 'on';
                    pauseLoop = setTimeout(animPauseOff, BLINK);
                }
                function animPauseOff() {
                    var elem = document.getElementById('pause');
                    elem.className = 'off';
                    pauseLoop = setTimeout(animPauseOn, BLINK);
                }
                animPauseOn();
            }

            function turnPauseAnimationOff() {
                var elem = document.getElementById('pause');
                elem.className = 'off';
                clearTimeout(pauseLoop);
                pauseLoop = null;
            }

            function stopIntroAnimation() {
                clearTimeout(animationLoop);
                clearDisplay();
            }

            function gameOver() {
                clearTimeout(previewLoop);
                clearTimeout(gameLoop);
                clearTimeout(menuLoop);
                clearTimeout(animationLoop);
                clearTimeout(instructionLoop);
                resetScore();
                resetLevel();
                clearKeyboardEvents();
                clearPreview();
                turnInstructionOn();
                runIntroAnimation();
            }

            function openMenu() {
                var menuIndex = 0;
                function openTitle(idx) {
                    var menu = MENU_LIST[idx];
                    clearTimeout(menuLoop);
                    clearMatrix();
                    for (var i = 0; i < DISPLAY_WIDTH; ++i)
                        DISPLAY_MATRIX[10][i] = true;
                    for (var i = 11; i < DISPLAY_HEIGHT; ++i)
                        for (var j = 0; j < DISPLAY_WIDTH; ++j)
                            DISPLAY_MATRIX[i][j] = false;
                    var letter;
                    switch (idx) {
                        case 0:
                            letter = LETTER_A;
                            break;
                        case 1:
                            letter = LETTER_B;
                            break;
                        case 2:
                            letter = LETTER_C;
                            break;
                        case 3:
                            letter = LETTER_D;
                            break;
                        default:
                            letter = LETTER_A;
                    }
                    for (var i = 0; i < letter.length; ++i) {
                        var coord = letter[i];
                        DISPLAY_MATRIX[coord[0] + 1][coord[1] + 2] = true;
                    }
                    drawDisplay();
                    menu[0]();
                }
                onArrowUpPressed = null;
                onArrowDownPressed = null;
                onSpacePressed = function() {
                    clearTimeout(previewLoop);
                    clearTimeout(instructionLoop);
                    clearTimeout(animationLoop);
                    clearTimeout(menuLoop);
                    clearTimeout(gameLoop);
                    clearKeyboardEvents();
                    clearDisplay();
                    clearPreview();
                    resetScore();
                    resetLevel();
                    MENU_LIST[menuIndex][1]();
                }
                onArrowLeftPressed = function() {
                    if (menuIndex === 0)
                        return;
                    openTitle(--menuIndex);
                };
                onArrowRightPressed = function() {
                    if (menuIndex === MENU_LIST.length - 1)
                        return;
                    openTitle(++menuIndex);
                }
                openTitle(menuIndex);
            }

            // ==================
            //
            //  INTRO ANIMATION
            //
            // ==================

            function runIntroAnimation() {
                var idx = 0;
                var framerate = 20;
                const ANIM_SCRIPT = [
                    [0, 0], [0, 1], [0, 2], [0, 3], [0, 4], [0, 5], [0, 6], [0, 7], [0, 8], [0, 9],
                    [1, 9], [2, 9], [3, 9], [4, 9], [5, 9], [6, 9], [7, 9], [8, 9], [9, 9], [10, 9], 
                    [11, 9], [12, 9], [13, 9], [14, 9], [15, 9], [16, 9], [17, 9], [18, 9], [19, 9],
                    [19, 8], [19, 7], [19, 6], [19, 5], [19, 4], [19, 3], [19, 2], [19, 1], [19, 0],
                    [18, 0], [17, 0], [16, 0], [15, 0], [14, 0], [13, 0], [12, 0], [11, 0],
                    [10, 0], [9, 0], [8, 0], [7, 0], [6, 0], [5, 0], [4, 0], [3, 0], [2, 0], [1, 0],
                    [1, 1], [1, 2], [1, 3], [1, 4], [1, 5], [1, 6], [1, 7], [1, 8],
                    [2, 8], [3, 8], [4, 8], [5, 8], [6, 8], [7, 8], [8, 8], [9, 8], [10, 8], 
                    [11, 8], [12, 8], [13, 8], [14, 8], [15, 8], [16, 8], [17, 8], [18, 8],
                    [18, 7], [18, 6], [18, 5], [18, 4], [18, 3], [18, 2], [18, 1],
                    [17, 1], [16, 1], [15, 1], [14, 1], [13, 1], [12, 1], [11, 1],
                    [10, 1], [9, 1], [8, 1], [7, 1], [6, 1], [5, 1], [4, 1], [3, 1], [2, 1],
                    [2, 2], [2, 3], [2, 4], [2, 5], [2, 6], [2, 7],
                    [3, 7], [4, 7], [5, 7], [6, 7], [7, 7], [8, 7], [9, 7], [10, 7],
                    [11, 7], [12, 7], [13, 7], [14, 7], [15, 7], [16, 7], [17, 7],
                    [17, 6], [17, 5], [17, 4], [17, 3], [17, 2],
                    [16, 2], [15, 2], [14, 2], [13, 2], [12, 2], [11, 2],
                    [10, 2], [9, 2], [8, 2], [7, 2], [6, 2], [5, 2], [4, 2], [3, 2],
                    [3, 3], [3, 4], [3, 5], [3, 6],
                    [4, 6], [5, 6], [6, 6], [7, 6], [8, 6], [9, 6], [10, 6],
                    [11, 6], [12, 6], [13, 6], [14, 6], [15, 6], [16, 6],
                    [16, 5], [16, 4], [16, 3],
                    [15, 3], [14, 3], [13, 3], [12, 3], [11, 3], 
                    [10, 3], [9, 3], [8, 3], [7, 3], [6, 3], [5, 3], [4, 3],
                    [4, 4], [4, 5], [5, 5], [6, 5], [7, 5], [8, 5], [9, 5],
                    [10, 5], [11, 5], [12, 5], [13, 5], [14, 5], [15, 5],
                    [15, 4], [14, 4], [13, 4], [12, 4], [11, 4], [10, 4],
                    [9, 4], [8, 4], [7, 4], [6, 4], [5, 4], [3, 4], [2, 4], [1, 4]
                ];
                const TITLE_A_SCRIPT = [
                    [0, 1], [0, 4], [0, 6],
                    [1, 0], [1, 1], [1, 4], [1, 6],
                    [2, 1], [2, 4], [2, 5],
                    [3, 1], [3, 4], [3, 6],
                    [4, 1], [4, 4], [4, 6],
                    [5, 0], [5, 1], [5, 2], [5, 4], [5, 6]
                ];
                const TITLE_B_SCRIPT = [
                    [0, 0], [0, 2], [0, 5],
                    [1, 0], [1, 2], [1, 3], [1, 5],
                    [2, 0], [2, 2], [2, 3], [2, 5],
                    [3, 0], [3, 2], [3, 4], [3, 5],
                    [4, 0], [4, 2], [4, 4], [4, 5],
                    [5, 0], [5, 2], [5, 5]
                ];
                const TITLE_C_SCRIPT = [
                    [0, 1], [0, 4],
                    [1, 0], [1, 1], [1, 4],
                    [2, 1], [2, 4],
                    [3, 1], [3, 4],
                    [4, 1],
                    [5, 0], [5, 1], [5, 2], [5, 4]
                ];
                function kf04() {
                    clearDisplay();
                }
                function kf03() {
                    var shortBlink = 100;
                    var longBlink = 500;
                    var bigBlink = 1000;
                    var idx = 0;
                    var bks = 0;
                    var word = [LETTER_B, LETTER_R, LETTER_I, LETTER_C, LETTER_K];
                    function showLetter(idx) {
                        var letter = word[idx];
                        var coord;
                        for (var i = 0; i < letter.length; ++i) {
                            coord = letter[i];
                            DISPLAY_MATRIX[coord[0] + 5][coord[1] + 2] = true;
                        }
                        drawDisplay();
                    }
                    function kf03h() {
                        clearDisplay();
                        animationLoop = setTimeout(kf03g, shortBlink);
                    }
                    function kf03g() {
                        var coord;
                        for (var i = 0; i < TITLE_A_SCRIPT.length; ++i) {
                            coord = TITLE_A_SCRIPT[i];
                            DISPLAY_MATRIX[coord[0]][coord[1]] = true;
                        }
                        for (var i = 0; i < TITLE_B_SCRIPT.length; ++i) {
                            coord = TITLE_B_SCRIPT[i];
                            DISPLAY_MATRIX[coord[0] + 7][coord[1] + 2] = true;
                        }
                        for (var i = 0; i < TITLE_C_SCRIPT.length; ++i) {
                            coord = TITLE_C_SCRIPT[i];
                            DISPLAY_MATRIX[coord[0] + 14][coord[1] + 5] = true;
                        }
                        drawDisplay();
                        if (bks++ > 3) {
                            bks = 0;
                            animationLoop = setTimeout(kf01, bigBlink);
                        } else {
                            animationLoop = setTimeout(kf03h, shortBlink);
                        }
                    }
                    function kf03f() {
                        if (idx >= word.length)
                            kf03g();
                        else {
                            showLetter(idx++);
                            animationLoop = setTimeout(kf03a, longBlink);
                        }
                    }
                    function kf03e() {
                        clearDisplay();
                        animationLoop = setTimeout(kf03f, shortBlink);
                    }
                    function kf03d() {
                        fillDisplay();
                        animationLoop = setTimeout(kf03e, shortBlink);
                    }
                    function kf03c() {
                        clearDisplay();
                        animationLoop = setTimeout(kf03d, shortBlink);
                    }
                    function kf03b() {
                        fillDisplay();
                        animationLoop = setTimeout(kf03c, shortBlink);
                    }
                    function kf03a() {
                        clearDisplay();
                        animationLoop = setTimeout(kf03b, shortBlink);
                    }
                    kf03a();
                }
                function kf02() {
                    if (idx >= ANIM_SCRIPT.length) {
                        idx = 0;
                        kf03();
                    } else {
                        let coord = ANIM_SCRIPT[idx++];
                        DISPLAY_MATRIX[coord[0]][coord[1]] = false;
                        drawDisplay();
                        animationLoop = setTimeout(kf02, framerate);
                    }
                }
                function kf01() {
                    if (idx >= ANIM_SCRIPT.length) {
                        idx = 0;
                        kf02();
                    } else {
                        let coord = ANIM_SCRIPT[idx++];
                        DISPLAY_MATRIX[coord[0]][coord[1]] = true;
                        drawDisplay();
                        animationLoop = setTimeout(kf01, framerate);
                    }
                }
                onArrowDownPressed = null;
                onArrowLeftPressed = null;
                onArrowRightPressed = null;
                onArrowUpPressed = null;
                onSpacePressed = function() {
                    turnInstructionOff();
                    stopIntroAnimation();
                    openMenu();
                };
                kf01();
            }

            // ==================
            //
            //  MENU ANIMATIONS
            //
            // ==================

            // RACE ANIMATION

            function raceAnimation() {

                const FRAME_BK = [
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [true, false, false, false, false, false, false, false, false, true],
                    [true, false, false, false, false, false, false, false, false, true],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [true, false, false, false, false, false, false, false, false, true],
                    [true, false, false, false, false, false, false, false, false, true],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [true, false, false, true, false, false, false, false, false, true],
                    [true, false, true, true, true, false, false, false, false, true],
                    [true, false, false, true, false, false, false, false, false, true],
                    [false, false, true, true, true, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [true, false, false, false, false, false, false, false, false, true],
                    [true, false, false, false, false, false, false, false, false, true],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [true, false, false, false, false, false, false, false, false, true],
                    [true, false, false, false, false, false, true, false, false, true],
                    [false, false, false, false, false, true, true, true, false, false],
                    [false, false, false, false, false, false, true, false, false, false],
                    [true, false, false, false, false, true, true, true, false, true],
                    [true, false, false, false, false, false, false, false, false, true],
                    [true, false, false, false, false, false, false, false, false, true],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [true, false, false, false, false, false, false, false, false, true],
                    [true, false, false, false, false, false, false, false, false, true],
                    [false, false, false, false, false, false, true, false, false, false],
                    [false, false, false, false, false, true, true, true, false, false],
                    [true, false, false, false, false, false, true, false, false, true],
                    [true, false, false, false, false, true, true, true, false, true],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [true, false, false, false, false, false, false, false, false, true],
                    [true, false, false, false, false, false, false, false, false, true],
                    [true, false, false, false, false, false, false, false, false, true],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, true, false, false, false, false, false, false],
                    [true, false, true, true, true, false, false, false, false, true],
                    [true, false, false, true, false, false, false, false, false, true],
                    [false, false, true, true, true, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [true, false, false, false, false, false, false, false, false, true],
                    [true, false, false, false, false, false, false, false, false, true],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [true, false, false, false, false, false, false, false, false, true],
                    [true, false, false, true, false, false, false, false, false, true],
                    [true, false, true, true, true, false, false, false, false, true],
                    [false, false, false, true, false, false, false, false, false, false],
                    [false, false, true, true, true, false, false, false, false, false],
                    [true, false, false, false, false, false, false, false, false, true],
                    [true, false, false, false, false, false, false, false, false, true],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [true, false, false, false, false, false, false, false, false, true],
                    [true, false, false, false, false, false, false, false, false, true],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [true, false, false, false, false, false, false, false, false, true],
                    [true, false, false, false, false, false, false, false, false, true],
                    [true, false, false, false, false, false, false, false, false, true],
                ];
                const CAR_MATRIX = [
                    [false, true, false],
                    [true, true, true],
                    [false, true, false],
                    [true, true, true]
                ];
                var kf = FRAME_BK.length - 9;
                var limitInf = 31;
                var limitSup = 11;
                function keyframe() {
                    if (kf < 0)
                        kf = FRAME_BK.length - 9;
                    for (var i = 0; i < 9; ++i)
                        for (var j = 0; j < DISPLAY_WIDTH; ++j) {
                            var x0 = i + 11;
                            var y0 = j;
                            var x1 = kf + i;
                            var y1 = j;
                            DISPLAY_MATRIX[x0][y0] = FRAME_BK[x1][y1];
                        }
                    for (var i = 0; i < CAR_MATRIX.length; ++i)
                        for (var j = 0; j < CAR_MATRIX[0].length; ++j) {
                            var x = i + (DISPLAY_HEIGHT - CAR_MATRIX.length - 1);
                            var y = j + 2 + (kf > limitInf || kf < limitSup ? CAR_MATRIX[0].length : 0);
                            DISPLAY_MATRIX[x][y] = CAR_MATRIX[i][j];
                        }
                    drawDisplay();
                    --kf;
                    menuLoop = setTimeout(keyframe, 100);
                }
                keyframe();
            }

            // TETRIS ANIMATION

            function tetrisAnimation() {
                var kf00, kf01, kf02, kf03, kf04, kf05, kf06, kf07, kf08, kf09, kf10, kf11;
                kf11 = function() {
                    const matrix = [
                        [19, 1], [19, 3], [19, 4], [19, 5], [19, 7],
                        [19, 0], [18, 0], [17, 0],
                        [18, 8], [19, 8], [19, 9]
                    ];
                    for (var i = 11; i < DISPLAY_HEIGHT; ++i)
                        for (var j = 0; j < DISPLAY_WIDTH; ++j)
                            DISPLAY_MATRIX[i][j] = false;
                    for (var i = 0; i < matrix.length; ++i) {
                        var coord = matrix[i];
                        DISPLAY_MATRIX[coord[0]][coord[1]] = true;
                    }
                    drawDisplay();
                    menuLoop = setTimeout(kf00, 2000);
                }
                kf10 = function() {
                    var idx = 0;
                    function kf10b() {
                        if (idx >= DISPLAY_WIDTH)
                            menuLoop = setTimeout(kf11, 500);
                        else {
                            DISPLAY_MATRIX[19][idx++] = false;
                            drawDisplay();
                            menuLoop = setTimeout(kf10b, 20);
                        }
                    }
                    kf10b();
                }
                kf09 = function() {
                    const matrix = [
                        [19, 0], [19, 1], [19, 2], [19, 3], [19, 4], 
                        [19, 5], [19, 6], [19, 7], [19, 8],
                        [18, 1], [18, 3], [18, 4], [18, 5], [18, 7],
                        [18, 0], [17, 0], [16, 0],
                        [17, 8], [18, 8], [18, 9], [19, 9]
                    ];
                    for (var i = 11; i < DISPLAY_HEIGHT; ++i)
                        for (var j = 0; j < DISPLAY_WIDTH; ++j)
                            DISPLAY_MATRIX[i][j] = false;
                    for (var i = 0; i < matrix.length; ++i) {
                        var coord = matrix[i];
                        DISPLAY_MATRIX[coord[0]][coord[1]] = true;
                    }
                    drawDisplay();
                    menuLoop = setTimeout(kf10, 500);
                }
                kf08 = function() {
                    const matrix = [
                        [19, 0], [19, 1], [19, 2], [19, 3], [19, 4], 
                        [19, 5], [19, 6], [19, 7], [19, 8],
                        [18, 1], [18, 3], [18, 4], [18, 5], [18, 7],
                        [18, 0], [17, 0], [16, 0],
                        [16, 8], [17, 8], [17, 9], [18, 9]
                    ];
                    for (var i = 11; i < DISPLAY_HEIGHT; ++i)
                        for (var j = 0; j < DISPLAY_WIDTH; ++j)
                            DISPLAY_MATRIX[i][j] = false;
                    for (var i = 0; i < matrix.length; ++i) {
                        var coord = matrix[i];
                        DISPLAY_MATRIX[coord[0]][coord[1]] = true;
                    }
                    drawDisplay();
                    menuLoop = setTimeout(kf09, 500);
                }
                kf07 = function() {
                    const matrix = [
                        [19, 0], [19, 1], [19, 2], [19, 3], [19, 4], 
                        [19, 5], [19, 6], [19, 7], [19, 8],
                        [18, 1], [18, 3], [18, 4], [18, 5], [18, 7],
                        [18, 0], [17, 0], [16, 0],
                        [15, 8], [16, 8], [16, 9], [17, 9]
                    ];
                    for (var i = 11; i < DISPLAY_HEIGHT; ++i)
                        for (var j = 0; j < DISPLAY_WIDTH; ++j)
                            DISPLAY_MATRIX[i][j] = false;
                    for (var i = 0; i < matrix.length; ++i) {
                        var coord = matrix[i];
                        DISPLAY_MATRIX[coord[0]][coord[1]] = true;
                    }
                    drawDisplay();
                    menuLoop = setTimeout(kf08, 250);
                }
                kf06 = function() {
                    const matrix = [
                        [19, 0], [19, 1], [19, 2], [19, 3], [19, 4], 
                        [19, 5], [19, 6], [19, 7], [19, 8],
                        [18, 1], [18, 3], [18, 4], [18, 5], [18, 7],
                        [18, 0], [17, 0], [16, 0],
                        [15, 7], [16, 7], [16, 8], [17, 8]
                    ];
                    for (var i = 11; i < DISPLAY_HEIGHT; ++i)
                        for (var j = 0; j < DISPLAY_WIDTH; ++j)
                            DISPLAY_MATRIX[i][j] = false;
                    for (var i = 0; i < matrix.length; ++i) {
                        var coord = matrix[i];
                        DISPLAY_MATRIX[coord[0]][coord[1]] = true;
                    }
                    drawDisplay();
                    menuLoop = setTimeout(kf07, 250);
                }
                kf05 = function() {
                    const matrix = [
                        [19, 0], [19, 1], [19, 2], [19, 3], [19, 4], 
                        [19, 5], [19, 6], [19, 7], [19, 8],
                        [18, 1], [18, 3], [18, 4], [18, 5], [18, 7],
                        [18, 0], [17, 0], [16, 0],
                        [14, 7], [15, 7], [15, 8], [16, 8]
                    ];
                    for (var i = 11; i < DISPLAY_HEIGHT; ++i)
                        for (var j = 0; j < DISPLAY_WIDTH; ++j)
                            DISPLAY_MATRIX[i][j] = false;
                    for (var i = 0; i < matrix.length; ++i) {
                        var coord = matrix[i];
                        DISPLAY_MATRIX[coord[0]][coord[1]] = true;
                    }
                    drawDisplay();
                    menuLoop = setTimeout(kf06, 500);
                }
                kf04 = function() {
                    const matrix = [
                        [19, 0], [19, 1], [19, 2], [19, 3], [19, 4], 
                        [19, 5], [19, 6], [19, 7], [19, 8],
                        [18, 1], [18, 3], [18, 4], [18, 5], [18, 7],
                        [18, 0], [17, 0], [16, 0],
                        [13, 7], [14, 7], [14, 8], [15, 8]
                    ];
                    for (var i = 11; i < DISPLAY_HEIGHT; ++i)
                        for (var j = 0; j < DISPLAY_WIDTH; ++j)
                            DISPLAY_MATRIX[i][j] = false;
                    for (var i = 0; i < matrix.length; ++i) {
                        var coord = matrix[i];
                        DISPLAY_MATRIX[coord[0]][coord[1]] = true;
                    }
                    drawDisplay();
                    menuLoop = setTimeout(kf05, 250);
                }
                kf03 = function() {
                    const matrix = [
                        [19, 0], [19, 1], [19, 2], [19, 3], [19, 4], 
                        [19, 5], [19, 6], [19, 7], [19, 8],
                        [18, 1], [18, 3], [18, 4], [18, 5], [18, 7],
                        [18, 0], [17, 0], [16, 0],
                        [13, 6], [14, 6], [14, 7], [15, 7]
                    ];
                    for (var i = 11; i < DISPLAY_HEIGHT; ++i)
                        for (var j = 0; j < DISPLAY_WIDTH; ++j)
                            DISPLAY_MATRIX[i][j] = false;
                    for (var i = 0; i < matrix.length; ++i) {
                        var coord = matrix[i];
                        DISPLAY_MATRIX[coord[0]][coord[1]] = true;
                    }
                    drawDisplay();
                    menuLoop = setTimeout(kf04, 250);
                }
                kf02 = function() {
                    const matrix = [
                        [19, 0], [19, 1], [19, 2], [19, 3], [19, 4], 
                        [19, 5], [19, 6], [19, 7], [19, 8],
                        [18, 1], [18, 3], [18, 4], [18, 5], [18, 7],
                        [18, 0], [17, 0], [16, 0],
                        [12, 6], [13, 6], [13, 7], [14, 7]
                    ];
                    for (var i = 11; i < DISPLAY_HEIGHT; ++i)
                        for (var j = 0; j < DISPLAY_WIDTH; ++j)
                            DISPLAY_MATRIX[i][j] = false;
                    for (var i = 0; i < matrix.length; ++i) {
                        var coord = matrix[i];
                        DISPLAY_MATRIX[coord[0]][coord[1]] = true;
                    }
                    drawDisplay();
                    menuLoop = setTimeout(kf03, 250);
                }
                kf01 = function() {
                    const matrix = [
                        [19, 0], [19, 1], [19, 2], [19, 3], [19, 4], 
                        [19, 5], [19, 6], [19, 7], [19, 8],
                        [18, 1], [18, 3], [18, 4], [18, 5], [18, 7],
                        [18, 0], [17, 0], [16, 0],
                        [12, 5], [13, 5], [13, 6], [14, 6]
                    ];
                    for (var i = 11; i < DISPLAY_HEIGHT; ++i)
                        for (var j = 0; j < DISPLAY_WIDTH; ++j)
                            DISPLAY_MATRIX[i][j] = false;
                    for (var i = 0; i < matrix.length; ++i) {
                        var coord = matrix[i];
                        DISPLAY_MATRIX[coord[0]][coord[1]] = true;
                    }
                    drawDisplay();
                    menuLoop = setTimeout(kf02, 250);
                }
                kf00 = function() {
                    const matrix = [
                        [19, 0], [19, 1], [19, 2], [19, 3], [19, 4], 
                        [19, 5], [19, 6], [19, 7], [19, 8],
                        [18, 1], [18, 3], [18, 4], [18, 5], [18, 7],
                        [18, 0], [17, 0], [16, 0],
                        [11, 5], [12, 5], [12, 6], [13, 6]
                    ];
                    for (var i = 11; i < DISPLAY_HEIGHT; ++i)
                        for (var j = 0; j < DISPLAY_WIDTH; ++j)
                            DISPLAY_MATRIX[i][j] = false;
                    for (var i = 0; i < matrix.length; ++i) {
                        var coord = matrix[i];
                        DISPLAY_MATRIX[coord[0]][coord[1]] = true;
                    }
                    drawDisplay();
                    menuLoop = setTimeout(kf01, 500);
                }
                kf00();
            };

            // ==================
            //
            //      GAMES
            //
            // ==================

            // TETRIS

            function runTetris() {

                const WALL_MATRIX = [
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false]
                ];

                const stick = [
                    [true, true, true, true]
                ];

                const squad = [
                    [true, true], 
                    [true, true]
                ];

                const horse = [
                    [true, true],
                    [true, false],
                    [true, false]
                ];

                const curve = [
                    [true, true, false],
                    [false, true, true]
                ];

                const trian = [
                    [true, true, true],
                    [false, true, false]
                ];

                const buildings = [stick, squad, horse, curve, trian];
                
                const waitTime = 500;

                var currentBlock = null;
                var currentBlockPos = null;
                var nextBlock = null;
                var nextGameMethod = null;
                var normalFramerate = 0;
                var arrowInteractions = 0;
                var framerate = 0;
                var arrowLoop = null;
                var moves = 0;

                function chooseNextBlock() {
                    var block = (Math.random() * buildings.length) >> 0;
                    var flip = Math.random() < 0.5;
                    var rotate = (Math.random() * 4) >> 0;
                    var theOne = buildings[block];
                    if (flip) {
                        var theNewOne = [];
                        for (var i = 0; i < theOne.length; ++i) {
                            var line = [];
                            for (var j = 0; j < theOne[i].length; ++j) {
                                let k = theOne[i].length - 1 - j;
                                line.push(theOne[i][k]);
                            }
                            theNewOne.push(line);
                        }
                        theOne = theNewOne;
                    }
                    for (var z = 0; z < rotate; ++z) {
                        var theNewOne = [];
                        for (var i = 0; i < theOne[0].length; ++i) {
                            var line = [];
                            for (var j = 0; j < theOne.length; ++j) {
                                let k = theOne.length - 1 - j;
                                line.push(theOne[k][i]);
                            }
                            theNewOne.push(line);
                        }
                        theOne = theNewOne;
                    }
                    return theOne;
                }

                function eraseCurrentBlock() {
                    for (var i = 0; i < currentBlock.length; ++i)
                        for (var j = 0; j < currentBlock[0].length; ++j) {
                            var x = i + currentBlockPos[0];
                            var y = j + currentBlockPos[1];
                            if (x >= 0 && x < DISPLAY_HEIGHT && y >= 0 && y < DISPLAY_WIDTH)
                                DISPLAY_MATRIX[x][y] = WALL_MATRIX[x][y];
                        }
                    drawDisplay();
                }

                function drawCurrentBlock() {
                    for (var i = 0; i < currentBlock.length; ++i)
                        for (var j = 0; j < currentBlock[0].length; ++j) {
                            var x = i + currentBlockPos[0];
                            var y = j + currentBlockPos[1];
                            if (x >= 0 && x < DISPLAY_HEIGHT && y >= 0 && y < DISPLAY_WIDTH)
                                DISPLAY_MATRIX[x][y] = currentBlock[i][j] || WALL_MATRIX[x][y];
                        }
                    drawDisplay();
                }

                function previewBlock() {
                    var block = nextBlock;
                    for (var i = 0; i < PREVIEW_HEIGHT; ++i)
                        for (var j = 0; j < PREVIEW_WIDTH; ++j)
                            if (i < block.length && j < block[0].length)
                                PREVIEW_MATRIX[i][j] = block[i][j];
                            else
                                PREVIEW_MATRIX[i][j] = false;
                    drawPreview();
                }

                function pushCurrentBlockDown() {
                    eraseCurrentBlock();
                    currentBlockPos[0] = currentBlockPos[0] + 1;
                    drawCurrentBlock();
                }

                function insertCurrentBlock() {
                    var height = currentBlock.length;
                    var width = currentBlock[0].length;
                    var x = 1 - height;
                    var y = ((DISPLAY_WIDTH / 2) >> 0) - ((width / 2) >> 0);
                    currentBlockPos = [x, y];
                    drawCurrentBlock();
                }

                function fixBlockToWall() {
                    for (var i = 0; i < currentBlock.length; ++i)
                        for (var j = 0; j < currentBlock[0]. length; ++j) {
                            var x = currentBlockPos[0] + i;
                            var y = currentBlockPos[1] + j;
                            WALL_MATRIX[x][y] = currentBlock[i][j] || WALL_MATRIX[x][y];
                        }
                }

                function insertNextBlock() {
                    currentBlock = nextBlock;
                    nextBlock = chooseNextBlock();
                    previewBlock();
                    insertCurrentBlock();
                }

                function checkShock(block, newCoord) {
                    var shock = false;
                    for (var i = 0; i < block.length && !shock; ++i)
                        for (var j = 0; j < block[0].length && !shock; ++j) {
                            var x = newCoord[0] + i;
                            var y = newCoord[1] + j;
                            shock = ((x >= DISPLAY_HEIGHT) || (block[i][j] && x >= 0 && 
                                x < DISPLAY_HEIGHT && y >= 0 && y < DISPLAY_WIDTH && WALL_MATRIX[x][y]));
                        }
                    return shock;
                }

                function lookForCompleteLines() {
                    var completeLines = [];
                    var flag = false;
                    for (var i = 0; i < DISPLAY_HEIGHT; ++i) {
                        flag = true;
                        for (var j = 0; j < DISPLAY_WIDTH && flag; ++j)
                            flag = WALL_MATRIX[i][j];
                        if (flag)
                            completeLines.push(i);
                    }
                    var idx = 0;
                    function kf02() {
                        insertNextBlock();
                        nextGameMethod = engine;
                        gameLoop = setTimeout(engine, framerate);
                    }
                    function kf01() {
                        var points = (9 * completeLines.length) + (level * 3);
                        incScore(points);
                        for (var z = 0; z < completeLines.length; ++z) {
                            var index = completeLines[z];
                            for (var i = index; i > 0; --i)
                                for (var j = 0; j < DISPLAY_WIDTH; ++j) {
                                    WALL_MATRIX[i][j] = WALL_MATRIX[i - 1][j];
                                    DISPLAY_MATRIX[i][j] = DISPLAY_MATRIX[i - 1][j];
                                }
                        }
                        drawDisplay();
                        kf02();
                    }
                    function kf00() {
                        if (idx >= DISPLAY_WIDTH) {
                            nextGameMethod = kf01;
                            gameLoop = setTimeout(kf01, 300);
                            return;
                        }
                        for (var i = 0; i < completeLines.length; ++i) {
                            WALL_MATRIX[completeLines[i]][idx] = false;
                            DISPLAY_MATRIX[completeLines[i]][idx] = false;
                        }
                        drawDisplay();
                        ++idx;
                        nextGameMethod = kf00;
                        gameLoop = setTimeout(kf00, 20);
                    }
                    if (completeLines.length > 0)
                        kf00();
                    else
                        kf02();
                }

                function countMove() {
                    ++moves;
                    incScore(3);
                    if (level < 100 && moves % 10 === 0) {
                        incLevel();
                        normalFramerate = normalFramerate - 5;
                    }
                }

                function engine() {
                    var newCoord = [currentBlockPos[0] + 1, currentBlockPos[1]];
                    var shock = checkShock(currentBlock, newCoord);
                    if (shock) {
                        if (currentBlockPos[0] < 0) {
                            gameOver();
                            return;
                        }
                        coolDown();
                        countMove();
                        fixBlockToWall();
                        lookForCompleteLines();
                    } else {
                        pushCurrentBlockDown();
                        nextGameMethod = engine;
                        gameLoop = setTimeout(engine, framerate);
                    }
                }

                function startEngine() {
                    nextGameMethod = engine;
                    gameLoop = setTimeout(engine, framerate);
                }

                function moveCurrentBlockToTheLeft() {
                    var newCoord = [currentBlockPos[0], currentBlockPos[1] - 1];
                    if (newCoord[1] < 0)
                        return;
                    if (checkShock(currentBlock, newCoord))
                        return;
                    eraseCurrentBlock();
                    currentBlockPos = newCoord;
                    drawCurrentBlock();
                    var delay = arrowInteractions++ > 0 ? 50 : waitTime;
                    arrowLoop = setTimeout(moveCurrentBlockToTheLeft, delay);
                }

                function moveCurrentBlockToTheRight() {
                    var newCoord = [currentBlockPos[0], currentBlockPos[1] + 1];
                    if ((newCoord[1] + currentBlock[0].length) > DISPLAY_WIDTH)
                        return;
                    if (checkShock(currentBlock, newCoord))
                        return;
                    eraseCurrentBlock();
                    currentBlockPos = newCoord;
                    drawCurrentBlock();
                    var delay = arrowInteractions++ > 0 ? 50 : waitTime;
                    arrowLoop = setTimeout(moveCurrentBlockToTheRight, delay);
                }

                function stopArrowMove() {
                    clearTimeout(arrowLoop);
                    arrowInteractions = 0;
                }

                function rotateCurrentBlock() {
                    var theOne = currentBlock;
                    var theNewOne = [];
                    for (var i = 0; i < theOne[0].length; ++i) {
                        var line = [];
                        for (var j = 0; j < theOne.length; ++j) {
                            let k = theOne.length - 1 - j;
                            line.push(theOne[k][i]);
                        }
                        theNewOne.push(line);
                    }
                    var oldMiddlePos = [
                        currentBlockPos[0] + ((currentBlock.length / 2) >> 0),
                        currentBlockPos[1] + ((currentBlock[0].length / 2) >> 0)
                    ];
                    var newPos = [
                        oldMiddlePos[0] - ((theNewOne.length / 2) >> 0),
                        oldMiddlePos[1] - ((theNewOne[0].length / 2) >> 0)
                    ];
                    if (newPos[0] + theNewOne.length > DISPLAY_HEIGHT)
                        return;
                    if ((newPos[1] < 0) || (newPos[1] + theNewOne[0].length > DISPLAY_WIDTH))
                        return;
                    if (checkShock(theNewOne, newPos))
                        return;
                    eraseCurrentBlock();
                    currentBlock = theNewOne;
                    currentBlockPos = newPos;
                    drawCurrentBlock();
                }

                function accelerate() {
                    framerate = (normalFramerate / 8) >> 0;
                    clearTimeout(gameLoop);
                    nextGameMethod();
                }

                function coolDown() {
                    framerate = normalFramerate;
                }

                function pauseGame() {
                    clearTimeout(gameLoop);
                    gameLoop = null;
                }

                function resumeGame() {
                    nextGameMethod();
                }

                function setActions() {
                    onArrowLeftPressed = moveCurrentBlockToTheLeft;
                    onArrowLeftReleased = stopArrowMove;
                    onArrowRightPressed = moveCurrentBlockToTheRight;
                    onArrowRightReleased = stopArrowMove;
                    onArrowDownPressed = accelerate;
                    onArrowDownReleased = coolDown;
                    onSpacePressed = rotateCurrentBlock;
                }

                function init() {
                    onGamePaused = pauseGame;
                    onGameResumed = resumeGame;
                    normalFramerate = 500;
                    framerate = normalFramerate;
                    currentBlock = chooseNextBlock();
                    nextBlock = chooseNextBlock();
                    previewBlock();
                    insertCurrentBlock();
                    setActions();
                    startEngine();
                }

                init();

            };

            // RACE

            function runRace() {

                const INITIAL_RACE_MATRIX = [
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [true, false, false, false, false, false, false, false, false, true],
                    [true, false, false, false, false, false, false, false, false, true],
                    [true, false, false, false, false, false, false, false, false, true],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [true, false, false, false, false, false, false, false, false, true],
                    [true, false, false, false, false, false, false, false, false, true],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [true, false, false, false, false, false, false, false, false, true],
                    [true, false, false, false, false, false, false, false, false, true],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [true, false, false, false, false, false, false, false, false, true],
                    [true, false, false, false, false, false, false, false, false, true],
                    [true, false, false, false, false, false, false, false, false, true],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [true, false, false, false, false, false, false, false, false, true],
                    [true, false, false, false, false, false, false, false, false, true],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [true, false, false, false, false, false, false, false, false, true],
                    [true, false, false, false, false, false, false, false, false, true]

                ];

                const RACE_MATRIX = [
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false]
                ];

                const CAR_MATRIX = [
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false],
                    [false, false, false, false, false, false, false, false, false, false]
                ];

                const FRAME_RATE_FACTOR = 3;
                const INITIAL_FRAME_RATE = 200;
                const LEVEL_FACTOR = 50;

                var localDistance;
                var overallDistance;
                var framerate;
                var normalFramerate;
                var carSideMode;
                var enemySideMode;
                var boost;
                var lifes;

                var nextGameMethod;
                var nextLevelPoint;

                function drawNewLine() {
                    var borderMode = false;
                    var modd13 = localDistance % 13;
                    switch (modd13) {
                        case 0:
                        case 1:
                        case 4:
                        case 5:
                        case 8:
                        case 9:
                        case 10:
                            borderMode = true;
                            break;
                        default:
                            borderMode = false;
                            break;
                    }
                    var modd9 = localDistance % 9;
                    if (modd9 === 0)
                        enemySideMode = Math.random() < 0.5;
                    switch (modd9) {
                        case 0:
                            enemyMatrix = [true, true, true];
                            break;
                        case 1:
                            enemyMatrix = [false, true, false];
                            break;
                        case 2:
                            enemyMatrix = [true, true, true];
                            break;
                        case 3:
                            enemyMatrix = [false, true, false];
                            break;
                        default:
                            enemyMatrix = [false, false, false];
                            break;
                    }
                    return [
                        borderMode, 
                        false, 
                        enemySideMode && enemyMatrix[0],
                        enemySideMode && enemyMatrix[1],
                        enemySideMode && enemyMatrix[2],
                        !enemySideMode && enemyMatrix[0],
                        !enemySideMode && enemyMatrix[1],
                        !enemySideMode && enemyMatrix[2],
                        false, 
                        borderMode
                    ];
                }

                function updateDisplay() {
                    for (var i = 0; i < DISPLAY_HEIGHT; ++i)
                        for (var j = 0; j < DISPLAY_WIDTH; ++j) {
                            var x = i + RACE_MATRIX.length - DISPLAY_MATRIX.length;
                            var y = j;
                            DISPLAY_MATRIX[i][j] = RACE_MATRIX[x][y] || CAR_MATRIX[i][j];
                        }
                    drawDisplay();
                }

                function checkShock() {
                    var shock = false;
                    for (var i = 0; i < DISPLAY_HEIGHT && !shock; ++i)
                        for (var j = 0; j < DISPLAY_WIDTH && !shock; ++j) {
                            var x = i + RACE_MATRIX.length - DISPLAY_MATRIX.length;
                            var y = j;
                            shock = RACE_MATRIX[x][y] && CAR_MATRIX[i][j];
                        }
                    return shock;
                }

                function moveForward() {
                    for (var i = RACE_MATRIX.length - 1; i > 0; --i)
                        for (var j = 0; j < RACE_MATRIX[0].length; ++j)
                            RACE_MATRIX[i][j] = RACE_MATRIX[i - 1][j];
                    var newLine = drawNewLine();
                    for (var j = 0; j < RACE_MATRIX[0].length; ++j)
                        RACE_MATRIX[0][j] = newLine[j];
                }

                function checkPoints() {
                    if (overallDistance % 13 === 12) {
                        let points = 5 + ((level / 3) >> 0);
                        incScore(points);
                    }
                }

                function checkLevel() {
                    if (level < 99 && overallDistance === nextLevelPoint) {
                        incLevel();
                        normalFramerate = INITIAL_FRAME_RATE - level * ((INITIAL_FRAME_RATE / 100) >> 0);
                        framerate = boost ? (normalFramerate / FRAME_RATE_FACTOR) >> 0 : normalFramerate;
                        nextLevelPoint = overallDistance + LEVEL_FACTOR * (level + 1);
                    }
                }

                function drawLifes() {
                    for (var i = 0; i < PREVIEW_MATRIX.length; ++i)
                        PREVIEW_MATRIX[i][0] = i >= PREVIEW_MATRIX.length - lifes;
                    drawPreview();
                }

                function updateLifes() {
                    var k = 0;
                    function anim0() {
                        drawLifes();
                        previewLoop = setTimeout(anim1, 250);
                    }
                    function anim1() {
                        if (k++ > 2)
                            return;
                        clearPreview();
                        previewLoop = setTimeout(anim0, 250);
                    }
                    anim1();
                }

                function looseLife() {
                    const frame0 = [
                        [true, false, false, true],
                        [false, true, true, false],
                        [false, true, true, false],
                        [true, false, false, true]
                    ];
                    const frame1 = [
                        [false, true, true, false],
                        [true, false, false, true],
                        [true, false, false, true],
                        [false, true, true, false]
                    ];
                    var pos = [15, carSideMode ? 2 : 4];
                    var k = 0;
                    function anim0() {
                        for (var i = 0; i < frame0.length; ++i)
                            for (var j = 0; j < frame0[0].length; ++j) {
                                var x = i + pos[0];
                                var y = j + pos[1];
                                DISPLAY_MATRIX[x][y] = frame0[i][j];
                            }
                        drawDisplay();
                        nextGameMethod = anim1;
                        gameLoop = setTimeout(nextGameMethod, 100);
                    }
                    function anim1() {
                        if (k++ > 5) {
                            anim2();
                            return;
                        }
                        for (var i = 0; i < frame1.length; ++i)
                            for (var j = 0; j < frame1[0].length; ++j) {
                                var x = i + pos[0];
                                var y = j + pos[1];
                                DISPLAY_MATRIX[x][y] = frame1[i][j];
                            }
                        drawDisplay();
                        nextGameMethod = anim0;
                        gameLoop = setTimeout(nextGameMethod, 100);
                    }
                    function anim2() {
                        if (lifes > 0)
                            startEngine();
                        else
                            gameOver();
                    }
                    --lifes;
                    updateLifes();
                    anim0();
                }

                function engine() {
                    checkPoints();
                    checkLevel();
                    moveForward();
                    updateDisplay();
                    if (checkShock())
                        looseLife();
                    else {
                        ++localDistance;
                        ++overallDistance;
                        nextGameMethod = engine;
                        gameLoop = setTimeout(engine, framerate);
                    }
                }

                function startEngine() {
                    for (var i = 0; i < RACE_MATRIX.length; ++i)
                        for (var j = 0; j < RACE_MATRIX[0].length; ++j)
                            RACE_MATRIX[i][j] = INITIAL_RACE_MATRIX[i][j];
                    localDistance = 0;
                    engine();
                }

                function updateSideMode() {
                    CAR_MATRIX[15][3] = carSideMode;
                    CAR_MATRIX[16][2] = carSideMode;
                    CAR_MATRIX[16][3] = carSideMode;
                    CAR_MATRIX[16][4] = carSideMode;
                    CAR_MATRIX[17][3] = carSideMode;
                    CAR_MATRIX[18][2] = carSideMode;
                    CAR_MATRIX[18][3] = carSideMode;
                    CAR_MATRIX[18][4] = carSideMode;
                    CAR_MATRIX[15][6] = !carSideMode;
                    CAR_MATRIX[16][5] = !carSideMode;
                    CAR_MATRIX[16][6] = !carSideMode;
                    CAR_MATRIX[16][7] = !carSideMode;
                    CAR_MATRIX[17][6] = !carSideMode;
                    CAR_MATRIX[18][5] = !carSideMode;
                    CAR_MATRIX[18][6] = !carSideMode;
                    CAR_MATRIX[18][7] = !carSideMode;
                }

                function setEvents() {
                    onSpacePressed = function() {
                        boost = true;
                        framerate = (normalFramerate / FRAME_RATE_FACTOR) >> 0;
                        clearTimeout(gameLoop);
                        nextGameMethod();
                    }
                    onSpaceReleased = function() {
                        boost = false;
                        framerate = normalFramerate;
                    }
                    onArrowLeftPressed = function() {
                        if (carSideMode)
                            return;
                        carSideMode = true;
                        updateSideMode();
                        updateDisplay();
                        if (checkShock()) {
                            clearTimeout(gameLoop);
                            gameLoop = null;
                            looseLife();
                        }
                    };
                    onArrowRightPressed = function() {
                        if (!carSideMode)
                            return;
                        carSideMode = false;
                        updateSideMode();
                        updateDisplay();
                        if (checkShock()) {
                            clearTimeout(gameLoop);
                            gameLoop = null;
                            looseLife();
                        }
                    }
                    onGamePaused = function() {
                        clearTimeout(gameLoop);
                        gameLoop = null;
                        boost = false;
                        framerate = normalFramerate;
                    }
                    onGameResumed = function() {
                        nextGameMethod && nextGameMethod();
                    }
                }

                function init() {
                    localDistance = 0;
                    overallDistance = 0;
                    normalFramerate = INITIAL_FRAME_RATE;
                    framerate = normalFramerate;
                    nextLevelPoint = LEVEL_FACTOR;
                    nextGameMethod = null;
                    boost = false;
                    lifes = 4;
                    drawLifes();
                    carSideMode = Math.random() < 0.5;
                    updateSideMode();
                    setEvents();
                    startEngine();
                }

                init();

            }

            // ==================
            //
            //      INIT
            //
            // ==================

            let init = function() {
                window.addEventListener('keydown', onKeyPressed);
                window.addEventListener('keyup', onKeyReleased);
                turnInstructionOn();
                runIntroAnimation();
            };

            init();
            
        </script>
    </body>
    <!--
    <svg width="10" height="10" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
        <g fill="none" stroke="#000000" stroke-width="2">
            <rect x="0" y="0" width="10" height="10"/>
        </g>
        <g fill="#000000">
            <rect x="2" y="2" width="6" height="6"/>
        </g>
    </svg>
    <svg width="40" height="70" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
        <defs>
            <mask id="borders">
                <g fill="#ffffff">
                    <rect x="0" y="0" width="40" height="70"/>
                </g>
                <g stroke="#000000" stroke-width="1">
                    <line x1="0" y1="0" x2="50" y2="50"/>
                    <line x1="40" y1="0" x2="-10" y2="50"/>
                    <line x1="0" y1="70" x2="45" y2="25"/>
                    <line x1="40" y1="70" x2="-5" y2="25"/>
                </g>
            </mask>
        </defs>
        <g fill="#000000" mask="url(#borders)">
            <polygon points="2,2 0,4 0,30 5,35 10,30 10,10" style="opacity: 1.0"/>
            <polygon points="2,2 4,0 36,0 38,2 30,10 10,10" style="opacity: 1.0"/>
            <polygon points="38,2 30,10 30,30 35,35 40,30 40,4" style="opacity: 1.0"/>
            <polygon points="5,35 10,30 30,30 35,35 30,40 10,40" style="opacity: 1.0"/>
            <polygon points="5,35 0,40 0,66 2,68 10,60 10,40" style="opacity: 1.0"/>
            <polygon points="2,68 10,60 30,60 38,68 36,70 4,70" style="opacity: 1.0"/>
            <polygon points="35,35 30,40 30,60 38,68 40,66 40,40" style="opacity: 1.0"/>
        </g>
    </svg>
    -->
</html>